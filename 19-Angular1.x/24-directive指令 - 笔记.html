<html>
<head>
  <title>24-directive指令 - 笔记</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1598"/>
<h1>24-directive指令 - 笔记</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/8 星期三 22:24</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/3/11 星期六 21:44</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">1-指令.run方法缓存模版</span></span></div><div><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">run  $templateCache</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myapp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #608b4e;">//run方法 注射器加载完所有模版时，此方法执行一次</span></div><div><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">run</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$templateCache</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #608b4e;">//用put方法缓存页面</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">$templateCache</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">put</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">&quot;hello.html&quot;</span><span style="color: #d4d4d4;">,</span><span style="color: #ce9178;">&quot;&lt;div&gt;Hello .......&lt;/div&gt;&quot;</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">})</span></div><br/><div><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">&quot;hello&quot;</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$templateCache</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'EACM'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #608b4e;">//用get方法调用页面</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">template:$templateCache</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'hello.html'</span><span style="color: #d4d4d4;">),</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">replace:</span><span style="color: #569cd6;">true</span></div><div><span style="color: #d4d4d4;">    }</span></div></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: #d4d4d4;">})</span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">2-在指令元素内嵌套其他元素</span></span></div><div><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">transclude</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;!</span><span style="color: #d4d4d4;">DOCTYPE html</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">html</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">lang</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;en&quot;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-app</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myApp&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">meta</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">charset</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;UTF-8&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">src</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;angular.js&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">这是指令内部的内容</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">    </span></div><br/><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[])</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'hello'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'EA'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">transclude:</span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">template:</span><span style="color: #ce9178;">'&lt;div&gt;hello ! &lt;div ng-transclude&gt;&lt;/div&gt;hahaha&lt;/div&gt;'</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">//指令内部的标签会被添加到&lt;div ng-transclude&gt;里面</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">html</span><span style="color: #808080;">&gt;</span></div><br/></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">3-compile与link</span></span></div><div><img src="24-directive指令 - 笔记_files/Image.png" type="image/png" style="height: auto;"/></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">4-用link实现指令复用</span></span></div><div><br/></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">html</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">lang</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;en&quot;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-app</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myApp&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">meta</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">charset</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;UTF-8&quot;</span><span style="color: #808080;">&gt;&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">src</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;angular.js&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-controller</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myctrl&quot;</span><span style="color: #808080;">&gt;&lt;</span><span style="color: #569cd6;">loader</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">howToLoad</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;loadData()&quot;</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">滑动加载</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">loader</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-controller</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myctrl2&quot;</span><span style="color: #808080;">&gt;&lt;</span><span style="color: #569cd6;">loader</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">howToLoad</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;loadData2()&quot;</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">滑动加载</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">loader</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">controller</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myctrl'</span><span style="color: #d4d4d4;">,[</span><span style="color: #ce9178;">'$scope'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">loadData</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'数据加载中...'</span><span style="color: #d4d4d4;">);}</span></div><div><span style="color: #d4d4d4;">    }]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">controller</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myctrl2'</span><span style="color: #d4d4d4;">,[</span><span style="color: #ce9178;">'$scope'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">loadData2</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'数据加载中...222'</span><span style="color: #d4d4d4;">);}</span></div><div><span style="color: #d4d4d4;">    }]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #608b4e;">//实现不同按钮调用不同函数 //实现指令的复用</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'loader'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'EA'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">//link函数用来操作DOM</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">link:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">elem</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">attr</span><span style="color: #d4d4d4;">){ </span><span style="color: #608b4e;">//link有四个参数</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">elem</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">bind</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">&quot;mouseenter&quot;</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span><span style="color: #608b4e;">//监听鼠标</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #608b4e;">// scope.loadData();//调用方法1</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #608b4e;">// scope.$apply('loadData()');//调用方法2</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">$apply</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">attr</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">howtoload</span><span style="color: #d4d4d4;">);</span><span style="color: #608b4e;">//用attr（元素）调用</span></div><div><span style="color: #d4d4d4;">                })</span></div><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">html</span><span style="color: #808080;">&gt;</span></div><br/></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">3-指令间的交互</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">html</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">lang</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;en&quot;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-app</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myApp&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">meta</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">charset</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;UTF-8&quot;</span><span style="color: #808080;">&gt;&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">src</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;angular.js&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">style</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #d7ba7d;">.btn</span><span style="color: #d4d4d4;">{</span><span style="color: #9cdcfe;">width</span><span style="color: #d4d4d4;">:</span><span style="color: #b5cea8;">50px</span><span style="color: #d4d4d4;">;</span><span style="color: #9cdcfe;">height</span><span style="color: #d4d4d4;">:</span><span style="color: #b5cea8;">30px</span><span style="color: #d4d4d4;">;</span><span style="color: #9cdcfe;">border</span><span style="color: #d4d4d4;">:</span><span style="color: #b5cea8;">1px</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">solid</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">red</span><span style="color: #d4d4d4;">;</span><span style="color: #9cdcfe;">padding</span><span style="color: #d4d4d4;">:</span><span style="color: #b5cea8;">5px</span><span style="color: #d4d4d4;">;}</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #d7ba7d;">div</span><span style="color: #d4d4d4;">{</span><span style="color: #9cdcfe;">margin</span><span style="color: #d4d4d4;">: </span><span style="color: #b5cea8;">10px</span><span style="color: #d4d4d4;"> </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;}</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">style</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">superman</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">strength</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">动感超人 -- 力量</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">superman</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">superman</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">strength</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">speed</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">动感超人 -- 力量+敏捷</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">superman</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">superman</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">strength</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">speed</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">light</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">动感超人 -- 力量+敏捷+发光</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">superman</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #608b4e;">//实现不同按钮调用不同函数 //实现指令的复用</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'superman'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">scope:</span><span style="color: #d4d4d4;">{},</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'AE'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">//使用controller:当你想将一些方法暴露给外部使用时；</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">//使用link：是用来处理指令内部事务，比如绑定事件</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">controller:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">){</span><span style="color: #608b4e;">//指令内部的方法，用于将指令内部的一组public方法暴露给外部调用</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">abilities</span><span style="color: #d4d4d4;"> = [];</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addStrength</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">abilities</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'strength'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">                }</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addSpeed</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">abilities</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'speed'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">                }</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addLigth</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">abilities</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">push</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'ligth'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">                }</span></div><div><span style="color: #d4d4d4;">            },</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">//如果自定义属性在页面上是以驼峰法命名的，在link函数里引用的时候就要全部小写，这是一个坑，要注意下</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">link:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">element</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">attrs</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//jqueryLite</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">element</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addClass</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'btn'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">element</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">bind</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'mouseenter'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">abilities</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">                })</span></div><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'strength'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">require:</span><span style="color: #ce9178;">'^superman'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">link:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">element</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">attrs</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">supermanCtrl</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">supermanCtrl</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addStrength</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'speed'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">require:</span><span style="color: #ce9178;">'^superman'</span><span style="color: #d4d4d4;">,</span><span style="color: #608b4e;">//表示当前指令依赖于这个指令</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">link:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">element</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">attrs</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">supermanCtrl</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">supermanCtrl</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addSpeed</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'light'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">require:</span><span style="color: #ce9178;">'^superman'</span><span style="color: #d4d4d4;">,</span><span style="color: #608b4e;">//表示当前指令依赖于这个指令</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">link:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">scope</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">element</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">attrs</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">supermanCtrl</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">supermanCtrl</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addLigth</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">html</span><span style="color: #808080;">&gt;</span></div><br/></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">4-独立作用域(隔离作用域) 使得指令之间互相不影响</span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">scope:{}</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;!</span><span style="color: #d4d4d4;">DOCTYPE html</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">html</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">lang</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;en&quot;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-app</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myApp&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">meta</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">charset</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;UTF-8&quot;</span><span style="color: #808080;">&gt;&lt;</span><span style="color: #569cd6;">script</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">src</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;angular.js&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">head</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">hello</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'hello'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'AE'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">scope:</span><span style="color: #d4d4d4;">{},</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">template:</span><span style="color: #ce9178;">'&lt;div&gt;&lt;input type=&quot;text&quot;  ng-model=&quot;userName&quot;/&gt;{{userName}}&lt;/div&gt;'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">replace:</span><span style="color: #569cd6;">true</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">html</span><span style="color: #808080;">&gt;</span></div></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">5-scope绑定策略</span></span></div><div><span style="font-size: 16px;"><span style="color: rgb(255, 0, 0);">将外面元素与指令内部元素绑定</span></span></div><div><img src="24-directive指令 - 笔记_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">@绑定</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-controller</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myCtrl&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">drink</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">flavor</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;{{ctrlFlavor}}&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">drink</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">controller</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myCtrl'</span><span style="color: #d4d4d4;">,[</span><span style="color: #ce9178;">'$scope'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ctrlFlavor</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'百威'</span></div><div><span style="color: #d4d4d4;">    }])</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'drink'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'AE'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">scope:</span><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">flavor:</span><span style="color: #ce9178;">'@'</span><span style="color: #d4d4d4;"> </span><span style="color: #608b4e;">//@绑定：把当前属性作为字符串传递</span></div><div><span style="color: #d4d4d4;">            },</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">template:</span><span style="color: #ce9178;">'&lt;div&gt;{{flavor}}&lt;/div&gt;'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">// link:function(scope,elem,attr){</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">//     scope.flavor = attr.flavor;//通过attr.flavor获取drink标签的flavor属性    scope.flavor绑定到template</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">// }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">=绑定</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-controller</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myCtrl&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    CTRL：</span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">br</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">type</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;text&quot;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-model</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;ctrlFlavor&quot;</span><span style="color: #808080;">&gt;&lt;</span><span style="color: #569cd6;">br</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    Directive：</span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">br</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">drink</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">flavor</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;ctrlFlavor&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">drink</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">controller</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myCtrl'</span><span style="color: #d4d4d4;">,[</span><span style="color: #ce9178;">'$scope'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">ctrlFlavor</span><span style="color: #d4d4d4;"> = </span><span style="color: #ce9178;">'百威'</span></div><div><span style="color: #d4d4d4;">    }])</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'drink'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'AE'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">scope:</span><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">flavor:</span><span style="color: #ce9178;">'='</span><span style="color: #d4d4d4;"> </span><span style="color: #608b4e;">//=绑定：与父scope中属性双向数据绑定</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//flavor与$scope.ctrlFlavor绑定</span></div><div><span style="color: #d4d4d4;">            },</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">template:</span><span style="color: #ce9178;">'&lt;input type=&quot;text&quot; ng-model=&quot;flavor&quot;&gt;'</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">&amp;绑定</span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">ng-controller</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;myCtrl&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">greeting</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">greet</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;sayHello(name)&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">greeting</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">greeting</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">greet</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;sayHello(name)&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">greeting</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">greeting</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">greet</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;sayHello(name)&quot;</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">greeting</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">module</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myApp'</span><span style="color: #d4d4d4;">,[]);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">controller</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'myCtrl'</span><span style="color: #d4d4d4;">,[</span><span style="color: #ce9178;">'$scope'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">sayHello</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #dcdcaa;">alert</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'Hello'</span><span style="color: #d4d4d4;"> + </span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    }])</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">app</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">directive</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'greeting'</span><span style="color: #d4d4d4;">,</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(){</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">restrict:</span><span style="color: #ce9178;">'AE'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">scope:</span><span style="color: #d4d4d4;">{</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">greet :</span><span style="color: #ce9178;">'&amp;'</span><span style="color: #d4d4d4;"> </span><span style="color: #608b4e;">//&amp;绑定：传递一个父scope的函数，稍后调用</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//flavor与$scope.ctrlFlavor绑定</span></div><div><span style="color: #d4d4d4;">            },</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">template:</span><span style="color: #ce9178;">'&lt;input type=&quot;text&quot; ng-model=&quot;userName&quot;/&gt;&lt;br/&gt;'</span><span style="color: #d4d4d4;">+</span><span style="color: #ce9178;">'&lt;button ng-click=&quot;greet({name:userName})&quot;&gt;Greeting&lt;/button&gt;&lt;br/&gt;'</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    })</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">script</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">body</span><span style="color: #808080;">&gt;</span></div><br/></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">权威指南 解释</span></span></div><div>使用无数据的隔离作用域并不常见。 AngularJS提供了几种方法能够将指令内部的隔离作用域，同指令外部的作用域进行数据绑定。</div><div><span style="color: rgb(255, 0, 0);">为了让新的指令作用域可以访问当前本地作用域中的变量</span>，需要使用下面三种别名中的一种。</div><div><br/></div><div><span style="color: rgb(50, 135, 18);">本地作用域属性：</span>使用@符号将本地作用域同DOM属性的值进行绑定。<u>指令内部作用域可以使用外部作用域的变量：</u></div><div><span style="font-size:8pt;">@ (or @attr)</span></div><div>现在，可以在指令中使用绑定的字符串了。</div><div><br/></div><div><span style="color: rgb(50, 135, 18);">双向绑定</span>：通过=可以将本地作用域上的属性同父级作用域上的属性进行双向的数据绑定。<br/>
就像普通的数据绑定一样，本地属性会反映出父数据模型中所发生的改变。</div><div><span style="font-size:8pt;">= (or =attr)</span></div><div><span style="font-size: 8pt;"><br/></span></div><div><span style="color: rgb(50, 135, 18);">父级作用域绑定</span> 通过&amp;符号可以对父级作用域进行绑定，以便在其中运行函数。意味着对这个值进行设置时会生成一个指向父级作用域的包装函数。</div><div>要使调用带有一个参数的父方法，我们需要传递一个对象，这个对象的键是参数的名称，值是要传递给参数的内容。</div><div><span style="font-size:8pt;">&amp; (or &amp;attr)</span></div><div><span style="font-size: 8pt;"><br/></span></div><div>例如，假设我们在开发一个电子邮件客户端，并且要创建一个电子邮件的文本输入框：<br/><span style="font-size:8pt;">&lt;input type=&quot;text&quot; ng-model=&quot;to&quot;/&gt;<br/>
&lt;!--</span> 调用指令 <span style="font-size:8pt;">--&gt;<br/>
&lt;div scope-example ng-model=&quot;to&quot;<br/>
on-send=&quot;sendMail(email)&quot;</span></div><div><span style="font-size: 8pt;">from-name=&quot;ari@fullstack.io&quot; /&gt;</span></div><div>这里有一个数据模型（ng-model），一个函数（sendMail()）和一个字符串（from-name）。<br/>
在指令中做如下设置以访问这些内容：<br/><span style="font-size: 15px;">scope: {<br/>
ngModel: '=', //</span> 将<span style="font-size:8pt;">ngModel</span>同指定对象绑定<br/><span style="font-size:8pt;">onSend: '&amp;', //</span> 将引用传递给这个方法<br/><span style="font-size:8pt;">fromName: '@' //</span> 储存与<span style="font-size:8pt;">fromName</span>相关联的字符串<br/><span style="font-size:8pt;">}<br/></span><span style="font-size:10pt;"><span style="color: rgb(255, 0, 0);">双向数据绑定</span><br/></span>双向数据绑定或许是AngularJS中最强大的功能，借助它我们可以将一个私有作用域中的属<br/>
性同DOM中的属性值进行绑定。在前面一章已经有一个很好的例子，展示了ng-model如何在外<br/>
部世界同自定义的指令之间进行双向数据绑定，这个指令在很多方面都同ng-bind相似。回顾一</div><div>下上一章的内容，并做相应的练习，来更好地理解这个重要的概念</div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;">6-angular内置指令</span></span></div><div><img src="24-directive指令 - 笔记_files/Image [2].png" type="image/png" style="height: auto;"/></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div></span>
</div></body></html> 