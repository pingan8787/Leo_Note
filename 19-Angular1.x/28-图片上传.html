<html>
<head>
  <title>28-图片上传</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="428"/>
<h1>28-图片上传</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/5/20 星期六 11:07</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/5/20 星期六 11:09</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 24px;"><b>HTML</b></span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 16px;"><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;panel panel-info&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;panel-heading&quot;</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">轮播图列表</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;panel-body&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">form</span> <span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;carousel_form&quot;</span> <span style="color: #9cdcfe;">method</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;post&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #608b4e;">&lt;!--enctype=&quot;multipart/form-data&quot;--&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;row&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;col-xs-6&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;upload_img&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">type</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;file&quot;</span> <span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;file_carousel&quot;</span> <span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;file_carousel&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #d4d4d4;">第：</span><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">type</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;number&quot;</span> <span style="color: #9cdcfe;">ng-model</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;img_id&quot;</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">张轮播图</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;col-xs-6&quot;</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span> <span style="color: #9cdcfe;">class</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;btn btn-info &quot;</span> <span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;carouselImg-submit&quot;</span> <span style="color: #9cdcfe;">ng-click</span><span style="color: #d4d4d4;">=</span><span style="color: #ce9178;">&quot;changeCarouselImg(img_id)&quot;</span><span style="color: #808080;">&gt;</span><span style="color: #d4d4d4;">上传</span><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">form</span><span style="color: #808080;">&gt;</span></div><div><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div></div><div><span style="font-size: 16px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></span></span></div><div><br/></div><div><br/></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 24px;"><b>JS</b></span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 16px;"><div><span style="color: #608b4e;">//轮播图列表</span></div><div><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">controller</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'carousel_list_controller'</span><span style="color: #d4d4d4;">, [</span><span style="color: #ce9178;">'$scope'</span><span style="color: #d4d4d4;">,</span> <span style="color: #ce9178;">'$http'</span><span style="color: #d4d4d4;">,</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">$http</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get_carousel_list</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">() {</span></div><div><span style="color: #9cdcfe;">$http</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">baseurl</span> <span style="color: #d4d4d4;">+</span> <span style="color: #ce9178;">'?Carousel.getCarousel'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">success</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #608b4e;">// $scope.carousel_data = data.data;</span></div><div><span style="color: #608b4e;">// change(data);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #d4d4d4;">};</span></div><div><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">get_carousel_list</span><span style="color: #d4d4d4;">();</span></div><br/><div><span style="color: #608b4e;">//上传</span></div><div><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">changeCarouselImg</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">formData</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">FormData</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getElementById</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'carousel_form'</span><span style="color: #d4d4d4;">));</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">formData</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #dcdcaa;">$http</span><span style="color: #d4d4d4;">({</span></div><div><span style="color: #9cdcfe;">method:</span> <span style="color: #ce9178;">'POST'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #9cdcfe;">url:</span> <span style="color: #9cdcfe;">baseurl</span> <span style="color: #d4d4d4;">+</span> <span style="color: #ce9178;">'?Carousel.editImage&amp;carousel_id='</span> <span style="color: #d4d4d4;">+</span> <span style="color: #9cdcfe;">id</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #9cdcfe;">data:</span> <span style="color: #9cdcfe;">$scope</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">formData</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #9cdcfe;">headers:</span> <span style="color: #d4d4d4;">{</span> <span style="color: #ce9178;">'Content-Type'</span><span style="color: #9cdcfe;">:</span> <span style="color: #569cd6;">undefined</span> <span style="color: #d4d4d4;">},</span></div><div><span style="color: #9cdcfe;">transformRequest:</span> <span style="color: #9cdcfe;">angular</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">identity</span></div><div><span style="color: #d4d4d4;">}).</span><span style="color: #dcdcaa;">success</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #608b4e;">// ok(data);</span></div><div><span style="color: #608b4e;">// if (data.state == 'ok') {</span></div><div><span style="color: #608b4e;">// }</span></div><div><span style="color: #d4d4d4;">}).</span><span style="color: #dcdcaa;">error</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ddd</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">ddd</span><span style="color: #d4d4d4;">)</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #d4d4d4;">}</span></div><div><span style="color: #d4d4d4;">}])</span></div></div><div><br/></div></span>
</div></body></html> 