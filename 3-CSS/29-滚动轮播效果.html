<html>
<head>
  <title>29-滚动轮播效果</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1642"/>
<h1>29-滚动轮播效果</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/6/9 星期五 16:29</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>&lt;!DOCTYPE html&gt;</div><div>&lt;html lang=&quot;en&quot;&gt;</div><div>&lt;head&gt;</div><div>    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;&gt;</div><div>    &lt;title&gt;首页&lt;/title&gt;</div><div>    &lt;script src=&quot;http://www.jq22.com/jquery/jquery-1.10.2.js&quot;&gt;&lt;/script&gt;</div><div>    &lt;style&gt;</div><div>        body{background-color: #262626}</div><div>        *{</div><div>            padding: 0;</div><div>            margin: 0;</div><div>        }</div><div>        .container{</div><div>            max-width: 800px;</div><div>            margin: 0 auto;</div><div>        }</div><div>        .slide{</div><div>            width: 100%;</div><div>            min-height: 180px;</div><div>            overflow: hidden;</div><div>            position: relative;</div><div><br/></div><div>        }</div><div>        .slide .img{</div><div>            overflow: hidden;</div><div>            position: absolute;</div><div>            transition: width 0.4s,height 0.4s,top 0.4s,left 0.4s,z-index 0.4s;</div><div>        }</div><div>        .slide .img img{</div><div>            width: calc(100% - 14px);</div><div>            height: calc(100% - 14px);</div><div>            margin: 7px;</div><div>        }</div><div>        .slide .img1{</div><div>            width: 40%;</div><div>            height: 40%;</div><div>            top: 30%;</div><div>            left: -50%;</div><div>            z-index: 1;</div><div>        }</div><div>        .slide .img2{</div><div>            width: 60%;</div><div>            height: 60%;</div><div>            top: 20%;</div><div>            left: -20%;</div><div>            z-index: 2;</div><div>        }</div><div>        .slide .img3{</div><div>            width: 80%;</div><div>            height: 80%;</div><div>            top: 10%;</div><div>            left: 10%;</div><div>            z-index: 3;</div><div>        }</div><div>        .slide .img4{</div><div>            width: 60%;</div><div>            height: 60%;</div><div>            top: 20%;</div><div>            left: 60%;</div><div>            z-index: 2;</div><div>        }</div><div>        .slide .img5{</div><div>            width: 40%;</div><div>            height: 40%;</div><div>            top: 30%;</div><div>            left: 110%;</div><div>            z-index: 1;</div><div>        }</div><div>        .slide-bt{</div><div>            position: absolute;</div><div>            left: 50%;</div><div>            bottom: 13%;</div><div>            z-index: 10;</div><div>        }</div><div>        .slide-bt span{</div><div>            width: 24px;</div><div>            height: 8px;</div><div>            background: #c9caca;</div><div>            float: left;</div><div>            margin: 5px;</div><div>            border-radius: 4px;</div><div>        }</div><div>        .slide .slide-bt .on{</div><div>            background: #ffd200;</div><div>        }</div><div>        button{</div><div>            width: 50px;</div><div>            margin: 20px;</div><div>        }</div><div>    &lt;/style&gt;</div><div>&lt;/head&gt;</div><div>&lt;body&gt;</div><div>&lt;div class=&quot;container&quot;&gt;</div><div>    &lt;div id=&quot;slide&quot; class=&quot;slide&quot; class=&quot;index-slide&quot; alt=&quot;star&quot;&gt;</div><div>        &lt;!-- 轮播图片数量可自行增减 --&gt;</div><div>        &lt;div class=&quot;img&quot;&gt;&lt;img src=&quot;image/1.png&quot;/&gt;&lt;/div&gt;</div><div>        &lt;div class=&quot;img&quot;&gt;&lt;img src=&quot;image/2.png&quot;/&gt;&lt;/div&gt;</div><div>        &lt;div class=&quot;img&quot;&gt;&lt;img src=&quot;image/3.png&quot;/&gt;&lt;/div&gt;</div><div>        &lt;div class=&quot;img&quot;&gt;&lt;img src=&quot;image/4.png&quot;/&gt;&lt;/div&gt;</div><div>        &lt;div class=&quot;img&quot;&gt;&lt;img src=&quot;image/5.png&quot;/&gt;&lt;/div&gt;</div><div><br/></div><div>        &lt;div class=&quot;slide-bt&quot;&gt;&lt;/div&gt;</div><div>    &lt;/div&gt;</div><div>    &lt;button onclick=&quot;left()&quot;&gt;上一页&lt;/button&gt;</div><div>    &lt;button onclick=&quot;right()&quot;&gt;下一页&lt;/button&gt;</div><div>&lt;/div&gt;</div><div><br/></div><div>&lt;script&gt;</div><div>var autoLb = false;          //autoLb=true为开启自动轮播</div><div>var autoLbtime = 1;         //autoLbtime为轮播间隔时间（单位秒）</div><div>var touch = true;           //touch=true为开启触摸滑动</div><div>var slideBt = true;         //slideBt=true为开启滚动按钮</div><div><br/></div><div><br/></div><div>var slideNub;               //轮播图片数量</div><div><br/></div><div>//窗口大小改变时改变轮播图宽高</div><div>$(window).resize(function(){</div><div>   $(&quot;.slide&quot;).height($(&quot;.slide&quot;).width()*0.56);</div><div>});</div><div><br/></div><div><br/></div><div>$(function(){</div><div>    $(&quot;.slide&quot;).height($(&quot;.slide&quot;).width()*0.56);</div><div>    slideNub = $(&quot;.slide .img&quot;).size();             //获取轮播图片数量</div><div>    for(i=0;i&lt;slideNub;i++){</div><div>        $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).attr(&quot;data-slide-imgId&quot;,i);</div><div>    }</div><div><br/></div><div><br/></div><div>    //根据轮播图片数量设定图片位置对应的class</div><div>    if(slideNub==1){</div><div>        for(i=0;i&lt;slideNub;i++){</div><div>            $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).addClass(&quot;img3&quot;);</div><div>        }</div><div>    }</div><div>    if(slideNub==2){</div><div>        for(i=0;i&lt;slideNub;i++){</div><div>            $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).addClass(&quot;img&quot;+(i+3));</div><div>        }</div><div>    }</div><div>    if(slideNub==3){</div><div>        for(i=0;i&lt;slideNub;i++){</div><div>            $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).addClass(&quot;img&quot;+(i+2));</div><div>        }</div><div>    }</div><div>    if(slideNub&gt;3&amp;&amp;slideNub&lt;6){</div><div>        for(i=0;i&lt;slideNub;i++){</div><div>            $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).addClass(&quot;img&quot;+(i+1));</div><div>        }</div><div>    }</div><div>    if(slideNub&gt;=6){</div><div>        for(i=0;i&lt;slideNub;i++){</div><div>            if(i&lt;5){</div><div>               $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).addClass(&quot;img&quot;+(i+1));</div><div>            }else{</div><div>                $(&quot;.slide .img:eq(&quot;+i+&quot;)&quot;).addClass(&quot;img5&quot;);</div><div>            }</div><div>        }</div><div>    }</div><div><br/></div><div><br/></div><div>    //根据轮播图片数量设定轮播图按钮数量</div><div>    if(slideBt){</div><div>        for(i=1;i&lt;=slideNub;i++){</div><div>            $(&quot;.slide-bt&quot;).append(&quot;&lt;span data-slide-bt='&quot;+i+&quot;' onclick='tz(&quot;+i+&quot;)'&gt;&lt;/span&gt;&quot;);</div><div>        }</div><div>        $(&quot;.slide-bt&quot;).width(slideNub*34);</div><div>        $(&quot;.slide-bt&quot;).css(&quot;margin-left&quot;,&quot;-&quot;+slideNub*17+&quot;px&quot;);</div><div>    }</div><div><br/></div><div><br/></div><div>    //自动轮播</div><div>    if(autoLb){</div><div>        setInterval(function(){</div><div>        right();</div><div>    }, autoLbtime*1000);</div><div>    }</div><div><br/></div><div><br/></div><div>    if(touch){</div><div>        k_touch();</div><div>    }</div><div>    slideLi();</div><div>    imgClickFy();</div><div>})</div><div><br/></div><div><br/></div><div>//右滑动</div><div>function right(){</div><div>    var fy = new Array();</div><div>    for(i=0;i&lt;slideNub;i++){</div><div>        fy[i]=$(&quot;.slide .img[data-slide-imgId=&quot;+i+&quot;]&quot;).attr(&quot;class&quot;);</div><div>    }</div><div>    for(i=0;i&lt;slideNub;i++){</div><div>        if(i==0){</div><div>            $(&quot;.slide .img[data-slide-imgId=&quot;+i+&quot;]&quot;).attr(&quot;class&quot;,fy[slideNub-1]);</div><div>        }else{</div><div>           $(&quot;.slide .img[data-slide-imgId=&quot;+i+&quot;]&quot;).attr(&quot;class&quot;,fy[i-1]);</div><div>        }</div><div>    }</div><div>    imgClickFy();</div><div>    slideLi();</div><div>}</div><div><br/></div><div><br/></div><div>//左滑动</div><div>function left(){</div><div>    var fy = new Array();</div><div>    for(i=0;i&lt;slideNub;i++){</div><div>        fy[i]=$(&quot;.slide .img[data-slide-imgId=&quot;+i+&quot;]&quot;).attr(&quot;class&quot;);</div><div>    }</div><div>    for(i=0;i&lt;slideNub;i++){</div><div>        if(i==(slideNub-1)){</div><div>            $(&quot;.slide .img[data-slide-imgId=&quot;+i+&quot;]&quot;).attr(&quot;class&quot;,fy[0]);</div><div>        }else{</div><div>           $(&quot;.slide .img[data-slide-imgId=&quot;+i+&quot;]&quot;).attr(&quot;class&quot;,fy[i+1]);</div><div>        }</div><div>    }</div><div>    imgClickFy();</div><div>    slideLi();</div><div>}</div><div><br/></div><div><br/></div><div>//轮播图片左右图片点击翻页</div><div>function imgClickFy(){</div><div>    $(&quot;.slide .img&quot;).removeAttr(&quot;onclick&quot;);</div><div>    $(&quot;.slide .img2&quot;).attr(&quot;onclick&quot;,&quot;left()&quot;);</div><div>    $(&quot;.slide .img4&quot;).attr(&quot;onclick&quot;,&quot;right()&quot;);</div><div>}</div><div><br/></div><div><br/></div><div>//修改当前最中间图片对应按钮选中状态</div><div>function slideLi(){</div><div>    var slideList = parseInt($(&quot;.slide .img3&quot;).attr(&quot;data-slide-imgId&quot;)) + 1;</div><div>    $(&quot;.slide-bt span&quot;).removeClass(&quot;on&quot;);</div><div>    $(&quot;.slide-bt span[data-slide-bt=&quot;+slideList+&quot;]&quot;).addClass(&quot;on&quot;);</div><div>}</div><div><br/></div><div><br/></div><div>//轮播按钮点击翻页</div><div>function tz(id){</div><div>    var tzcs = id - (parseInt($(&quot;.slide .img3&quot;).attr(&quot;data-slide-imgId&quot;)) + 1);</div><div>    if(tzcs&gt;0){</div><div>        for(i=0;i&lt;tzcs;i++){</div><div>            setTimeout(function(){</div><div>              right(); </div><div>            },1);</div><div>        }</div><div>    }</div><div>    if(tzcs&lt;0){</div><div>        tzcs=(-tzcs);</div><div>        for(i=0;i&lt;tzcs;i++){</div><div>            setTimeout(function(){</div><div>              left(); </div><div>            },1);</div><div>        }</div><div>    }</div><div>    slideLi();</div><div>}</div><div><br/></div><div><br/></div><div>//触摸滑动模块</div><div>function k_touch() {</div><div>    var _start = 0, _end = 0, _content = document.getElementById(&quot;slide&quot;);</div><div>    _content.addEventListener(&quot;touchstart&quot;, touchStart, false);</div><div>    _content.addEventListener(&quot;touchmove&quot;, touchMove, false);</div><div>    _content.addEventListener(&quot;touchend&quot;, touchEnd, false);</div><div>    function touchStart(event) {</div><div>        var touch = event.targetTouches[0];</div><div>        _start = touch.pageX;</div><div>    }</div><div>    function touchMove(event) {</div><div>        var touch = event.targetTouches[0];</div><div>        _end = (_start - touch.pageX);</div><div>    }</div><div><br/></div><div>    function touchEnd(event) {</div><div>        if (_end &lt; -100) {</div><div>            left();</div><div>            _end=0;</div><div>        }else if(_end &gt; 100){</div><div>            right();</div><div>            _end=0;</div><div>        }</div><div>    }</div><div>}</div><div><br/></div><div>&lt;/script&gt;</div><div>&lt;/body&gt;</div><div>&lt;/html&gt;</div></span>
</div></body></html> 