<html>
<head>
  <title>27-另类用JS来动态设置CSS样式</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1409"/>
<h1>27-另类用JS来动态设置CSS样式</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/22 星期三 11:44</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/3/22 星期三 23:16</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">用JS来动态设置CSS样式，常见的有以下几种</p><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">1. 直接设置style的属性某些情况用这个设置 !important值无效</p><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">如果属性有'-'号，就写成驼峰的形式（如textAlign）  如果想保留 - 号，就中括号的形式  element.style['text-align'] = '100px';</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">element.style.height = <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'100px'</span>;
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">2. 直接设置属性（只能用于某些属性，相关样式会自动识别）</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">element.setAttribute(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height'</span>, <span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 255);">100</span>);
element.setAttribute(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height'</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'100px'</span>);
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">3. 设置style的属性</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">element.setAttribute(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'style'</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height: 100px !important'</span>);
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">4. 使用setProperty如果要设置!important，推荐用这种方法设置第三个参数</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">element.style.setProperty(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height'</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'300px'</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'important'</span>);
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">5. 改变class比如JQ的更改class相关方法</p><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">因JS获取不到css的伪元素，所以可以通过改变伪元素父级的class来动态更改伪元素的样式</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">element.className = <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'blue'</span>;
element.className += <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'blue fb'</span>;
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">6. 设置cssText</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">element.style.cssText = <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height: 100px !important'</span>;
element.style.cssText += <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height: 100px !important'</span>;
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">7. 创建引入新的css样式文件</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; white-space: pre-wrap; display: block; overflow-x: auto;">
        <span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold; color: rgb(0, 0, 128);">function</span> <span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 0);">addNewStyle</span>(<span style="box-sizing: border-box;">newStyle</span>) </span>{
            <span style="box-sizing: border-box; font-weight: bold; color: rgb(0, 0, 128);">var</span> styleElement = <span style="box-sizing: border-box;">document</span>.getElementById(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'styles_js'</span>);

            <span style="box-sizing: border-box; font-weight: bold; color: rgb(0, 0, 128);">if</span> (!styleElement) {
                styleElement = <span style="box-sizing: border-box;">document</span>.createElement(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'style'</span>);
                styleElement.type = <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'text/css'</span>;
                styleElement.id = <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'styles_js'</span>;
                <span style="box-sizing: border-box;">document</span>.getElementsByTagName(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'head'</span>)[<span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 255);">0</span>].appendChild(styleElement);
            }
            
            styleElement.appendChild(<span style="box-sizing: border-box;">document</span>.createTextNode(newStyle));
        }

        addNewStyle(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'.box {height: 100px !important;}'</span>);

</code></pre><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">8. 使用addRule、insertRule</p><p style="box-sizing: border-box; margin: 0px 0px 25px; color: rgb(64, 64, 64); font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><img src="27-另类用JS来动态设置CSS样式_files/Image.gif" type="image/gif" style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; height: auto;"/></p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13.6px; display: block; padding: 6px; margin: 0px 0px 10px; color: rgb(51, 51, 51); background-color: rgb(246, 246, 246); border: none; border-radius: 3px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255); border-radius: 0px; margin: 5px; display: block; overflow-x: auto;"><span style="box-sizing: border-box; color: rgb(128, 128, 128); font-style: italic;">// 在原有样式操作</span><br/>
        <span style="box-sizing: border-box;">document</span>.styleSheets[<span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 255);">0</span>].addRule(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'.box'</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height: 100px'</span>);<br/>
        <span style="box-sizing: border-box;">document</span>.styleSheets[<span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 255);">0</span>].insertRule(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'.box {height: 100px}'</span>, <span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 255);">0</span>);<br/><br/>
        <span style="box-sizing: border-box; color: rgb(128, 128, 128); font-style: italic;">// 或者插入新样式时操作</span><br/>
        <span style="box-sizing: border-box; font-weight: bold; color: rgb(0, 0, 128);">var</span> styleEl = <span style="box-sizing: border-box;">document</span>.createElement(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'style'</span>),<br/>
            styleSheet = styleEl.sheet;<br/><br/>
        styleSheet.addRule(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'.box'</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'height: 100px'</span>);<br/>
        styleSheet.insertRule(<span style="box-sizing: border-box; color: rgb(0, 128, 0); font-weight: bold;">'.box {height: 100px}'</span>, <span style="box-sizing: border-box; font-weight: normal; color: rgb(0, 0, 255);">0</span>);<br/><br/></code><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(0, 0, 0);"><span style="font-size: inherit;">        <span style="box-sizing: border-box;"><span style="font-size: inherit;">document</span></span>.head.appendChild(styleEl);        </span></span></span></div></div></div></span>
</div></body></html> 