<html>
<head>
  <title>3-JS中的call()和apply()方法</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="640"/>
<h1>3-JS中的call()和apply()方法</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/2/11 星期六 16:27</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/3/9 星期四 9:51</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><br/></div><table style="-evernote-table:true;border-collapse:collapse;table-layout:fixed;margin-left:0px;width:100%;"><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:50.08223684210527%;"><div>call</div><div><br/></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:49.83552631578947%;"><div>apply</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:50%;"><div>传参数列表</div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:50%;"><div>传数组</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:50%;"><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">var pet = {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    words : '....',</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    speak : function(say){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        console.log(say + '' + this.words)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">}</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">// pet.speak('Speak');  //return  Speak ....</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">var dog = {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    words : 'Wang'</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">}</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">pet.speak.call(dog,'Speak');  //指定dog来作为上下文this</span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-family: Monaco;">//简单说：让dog使用pet.speak方法</span></span></div></div></td><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:50%;"><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">function Pet(words){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    this.words = words,</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    this.speak = function(){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">        console.log(this.words);</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    }</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">}</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">function Dog(words){</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    Pet.call(this,words)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    //Pet.apply(this,arguments)</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">}</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">var dog = new Dog('Wang');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">dog.speak();</span></span></span></div><div><span style="color: rgb(255, 0, 0);"><span style="font-family: Monaco;">//简单说：让pet使用代替this方法</span></span></div></div></td></tr></table><div><br/></div><div><br/></div><ol><li>JS中的call()和apply()方法  uule.iteye.com/blog/1158829</li><li>知乎解答  <a href="https://www.zhihu.com/question/20289071">https://www.zhihu.com/question/20289071</a></li></ol><div>在javascript OOP中，我们经常会这样定义：
<blockquote>function cat(){<br/>
}<br/>
cat.prototype={<br/>
food:&quot;fish&quot;,<br/>
say: function(){<br/>
alert(&quot;I love &quot;+this.food);<br/>
}<br/>
}<br/><br/><br/>
var blackCat = new cat;<br/>
blackCat.say();</blockquote>
但是如果我们有一个对象whiteDog = {food:&quot;bone&quot;},我们不想对它重新定义say方法，那么我们可以通过call或apply用blackCat的say方法：blackCat.say.call(whiteDog);<br/><br/>
所以，可以看出call和apply是为了动态改变this而出现的，当一个object没有某个方法，但是其他的有，我们可以借助call或apply用其它对象的方法来操作。<br/><br/>
用的比较多的，通过document.getElementsByTagName选择的dom 节点是一种类似array的array。它不能应用Array下的push,pop等方法。我们可以通过：<br/>
var domNodes = Array.prototype.slice.call(document.getElementsByTagName(&quot;*&quot;));</div><div>这样domNodes就可以应用Array下的所有方法了。</div><div><br/></div><div><span style="color: rgb(255, 0, 0);">其实就是借用其他函数来执行使用。调用一个对象的一个方法，以另一个对象替换当前对象。</span></div><div><span style="color: rgb(255, 0, 0);"><br/></span></div><div><span style="color: rgb(255, 0, 0);"><br/></span></div><div><p><strong><span style="font-size: medium;">1、方法定义</span></strong></p><p><span style="font-size: small;"><strong>call方法:</strong></span> <span style="font-size: small;"><br/>
语法：call([thisObj[,arg1[, arg2[,   [,.argN]]]]])<br/>
定义：调用一个对象的一个方法，以另一个对象替换当前对象。<br/>
说明：<br/>
call 方法可以用来代替另一个对象调用一个方法。call 方法可将一个函数的对象上下文从初始的上下文改变为由 thisObj 指定的新对象。<br/>
如果没有提供 thisObj 参数，那么 Global 对象被用作 thisObj。<br/><br/><strong>apply方法：</strong></span> <span style="font-size: small;"><br/>
语法：apply([thisObj[,argArray]])<br/>
定义：应用某一对象的一个方法，用另一个对象替换当前对象。<br/>
说明：<br/>
如果 argArray 不是一个有效的数组或者不是 arguments 对象，那么将导致一个 TypeError。<br/>
如果没有提供 argArray 和 thisObj 任何一个参数，那么 Global 对象将被用作 thisObj， 并且无法被传递任何参数。</span></p><p> </p><p><strong><span style="font-size: medium;">2、常用实例</span></strong></p><p>a、</p><div><div>Java代码  <a title="收藏这段代码"><img src="3-JS中的call()和apply()方法_files/Image.png" type="image/png" alt="收藏代码"/></a></div><ol start="1"><li>function add(a,b)  </li><li>{  </li><li>    alert(a+b);  </li><li>}  </li><li>function sub(a,b)  </li><li>{  </li><li>    alert(a-b);  </li><li>}  </li><li>  </li><li>add.call(sub,3,1);   </li></ol></div><p> <span style="font-size: small;">这个例子中的意思就是用 add 来替换 sub，add.call(sub,3,1) == add(3,1) ，所以运行结果为：alert(4); // 注意：js 中的函数其实是对象，函数名是对 Function 对象的引用。</span></p><p> </p><p>b、</p></div><div>Java代码  <a title="收藏这段代码"><img src="3-JS中的call()和apply()方法_files/Image [1].png" type="image/png" alt="收藏代码"/></a></div><ol start="1"><li>function Animal(){    </li><li>    this.name = &quot;Animal&quot;;    </li><li>    this.showName = function(){    </li><li>        alert(this.name);    </li><li>    }    </li><li>}    </li><li>  </li><li>function Cat(){    </li><li>    this.name = &quot;Cat&quot;;    </li><li>}    </li><li>   </li><li>var animal = new Animal();    </li><li>var cat = new Cat();    </li><li>    </li><li>//通过call或apply方法，将原本属于Animal对象的showName()方法交给对象cat来使用了。    </li><li>//输入结果为&quot;Cat&quot;    </li><li>animal.showName.call(cat,<span style="color: rgb(255, 0, 0);">&quot;,&quot;</span>);    </li><li><span style="color: rgb(65, 173, 28);">//animal.showName.apply(cat,<span style="color: rgb(255, 0, 0);">[]</span>);  </span></li></ol><div><br/></div><div><b><span style="color: rgb(255, 0, 0);">call 接收参数列表     apply接收数组 </span></b></div><div><span style="font-size: small;">call 的意思是把 animal 的方法放到cat上执行，原来cat是没有showName() 方法，现在是把animal 的showName()方法放到 cat上来执行，所以this.name 应该是 Cat</span></div><div><p> </p><p>c、实现继承</p><div><div>Java代码  <a title="收藏这段代码"><img src="3-JS中的call()和apply()方法_files/Image [2].png" type="image/png" alt="收藏代码"/></a></div><ol start="1"><li>function Animal(name){      </li><li>    this.name = name;      </li><li>    this.showName = function(){      </li><li>        alert(this.name);      </li><li>    }      </li><li>}      </li><li>    </li><li>function Cat(name){    </li><li>    Animal.call(this, name);    </li><li>}      </li><li>    </li><li>var cat = new Cat(&quot;Black Cat&quot;);     </li><li>cat.showName();  </li></ol></div><p><span style="font-size: small;"> Animal.call(this) 的意思就是使用 Animal对象代替this对象，那么 Cat中不就有Animal的所有属性和方法了吗，Cat对象就能够直接调用Animal的方法以及属性了.</span></p><p> </p><p>d、多重继承</p><div><div>Java代码  <a title="收藏这段代码"><img src="3-JS中的call()和apply()方法_files/Image [3].png" type="image/png" alt="收藏代码"/></a></div><ol start="1"><li>function Class10()  </li><li>{  </li><li>    this.showSub = function(a,b)  </li><li>    {  </li><li>        alert(a-b);  </li><li>    }  </li><li>}  </li><li>  </li><li>function Class11()  </li><li>{  </li><li>    this.showAdd = function(a,b)  </li><li>    {  </li><li>        alert(a+b);  </li><li>    }  </li><li>}  </li><li>  </li><li>function Class2()  </li><li>{  </li><li>    Class10.call(this);  </li><li>    Class11.call(this);  </li><li>}  </li></ol></div></div><div><br/></div><div><span style="font-size: small;"> 很简单，使用两个 call 就实现多重继承了<br/>
当然，js的继承还有其他方法，例如使用原型链，这个不属于本文的范畴，只是在此说明call 的用法。说了call ，当然还有 apply，这两个方法基本上是一个意思，区别在于 call 的第二个参数可以是任意类型，而apply的第二个参数必须是数组，也可以是arguments</span></div><div><span style="font-size: small;">还有 callee，caller..</span></div></span>
</div></body></html> 