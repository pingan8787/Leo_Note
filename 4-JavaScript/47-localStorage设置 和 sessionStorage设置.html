<html>
<head>
  <title>47-localStorage设置 和 sessionStorage设置</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1678"/>
<h1>47-localStorage设置 和 sessionStorage设置</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/6/5 星期一 16:45</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/6/5 星期一 16:48</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>HTML 5 Web 存储 www.w3school.com.cn/html5/html_5_webstorage.asp</div><div><br/></div><div>【localStorage】</div><div>存储的数据不会删除，包括关闭浏览器，除非主动删除</div><div>设置：localStorage.key= value;</div><div>删除：localStorage.clear();
<div><br/></div></div><div>【sessionStorage】</div><div>存储的数据不会删除，除非关闭浏览器或新窗口打开</div><div>设置：sessionStorage.key= value;</div><div><br/></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 16px;"><div><span style="color: #9cdcfe;">window</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">onload</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">() {</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'登录状态：'</span> <span style="color: #d4d4d4;">+</span> <span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">islogin</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'存储时间：'</span> <span style="color: #d4d4d4;">+</span> <span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">times</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'当前时间：'</span> <span style="color: #d4d4d4;">+</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">getTime</span><span style="color: #d4d4d4;">());</span></div><div><span style="color: #569cd6;">var</span> <span style="color: #9cdcfe;">little_times</span> <span style="color: #d4d4d4;">=</span> <span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">times</span> <span style="color: #d4d4d4;">-</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">getTime</span><span style="color: #d4d4d4;">());</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'剩余时间：'</span> <span style="color: #d4d4d4;">+</span> <span style="color: #9cdcfe;">little_times</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #c586c0;">if</span> <span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">little_times</span> <span style="color: #d4d4d4;">&gt;</span> <span style="color: #b5cea8;">0</span> <span style="color: #d4d4d4;">&amp;&amp;</span> <span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">islogin</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #dcdcaa;">$</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#login_div'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #dcdcaa;">$</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#islogin_div'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">show</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">}</span> <span style="color: #c586c0;">else</span> <span style="color: #d4d4d4;">{</span></div><div><span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">clear</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #dcdcaa;">$</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#islogin_div'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #d4d4d4;">}</span></div><div><span style="color: #d4d4d4;">};</span></div><div><span style="color: #608b4e;">/* 管理员登录 */</span></div><div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">adminLogin</span><span style="color: #d4d4d4;">() {</span></div><div><span style="color: #569cd6;">var</span> <span style="color: #9cdcfe;">admin_pwd</span> <span style="color: #d4d4d4;">=</span> <span style="color: #dcdcaa;">$</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.admin_pwd'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">val</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #9cdcfe;">$</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">post</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">BASE_URL</span> <span style="color: #d4d4d4;">+</span> <span style="color: #ce9178;">'?Admin.adminLogin'</span><span style="color: #d4d4d4;">, {</span> <span style="color: #9cdcfe;">login_pwd:</span> <span style="color: #9cdcfe;">admin_pwd</span> <span style="color: #d4d4d4;">},</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #c586c0;">if</span> <span style="color: #d4d4d4;">(</span><span style="color: #4ec9b0;">JSON</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">parse</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">).</span><span style="color: #9cdcfe;">state</span> <span style="color: #d4d4d4;">==</span> <span style="color: #ce9178;">&quot;ok&quot;</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #dcdcaa;">$</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#login_div'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">hide</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #dcdcaa;">$</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#islogin_div'</span><span style="color: #d4d4d4;">).</span><span style="color: #dcdcaa;">show</span><span style="color: #d4d4d4;">();</span></div><div><span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">islogin</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">;</span> <span style="color: #608b4e;">//设置存储登录状态</span></div><div><span style="color: #9cdcfe;">localStorage</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">times</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">Date</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">getTime</span><span style="color: #d4d4d4;">()</span> <span style="color: #d4d4d4;">+</span> <span style="color: #b5cea8;">1</span> <span style="color: #d4d4d4;">*</span> <span style="color: #b5cea8;">60</span> <span style="color: #d4d4d4;">*</span> <span style="color: #b5cea8;">1000</span><span style="color: #d4d4d4;">;</span> <span style="color: #608b4e;">//设置过期时间</span></div><div><span style="color: #d4d4d4;">}</span></div><div><span style="color: #dcdcaa;">alert_tip</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">data</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">})</span></div><div><span style="color: #d4d4d4;">}</span></div></div></span>
</div></body></html> 