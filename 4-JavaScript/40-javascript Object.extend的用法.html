<html>
<head>
  <title>40-javascript Object.extend的用法</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="526"/>
<h1>40-javascript Object.extend的用法</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/5/2 星期二 10:53</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/5/2 星期二 10:53</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="color: rgb(0, 0, 0);"><span style="color: rgb(0, 0, 0);"><strong style="color: black; background-color: rgb(160, 255, 255);">Object.extend</strong> </span><span style="color: rgb(0, 0, 0);">=</span> <span style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 0);">(destination, source) {<br/></span><span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 0, 0);"> (</span><span style="color: rgb(0, 0, 255);">var</span><span style="color: rgb(0, 0, 0);"> property </span><span style="color: rgb(0, 0, 255);">in</span><span style="color: rgb(0, 0, 0);"> source) {<br/>
    destination[property] </span><span style="color: rgb(0, 0, 0);">=</span><span style="color: rgb(0, 0, 0);"> source[property];<br/>
}<br/></span><span style="color: rgb(0, 0, 255);">return</span><span style="color: rgb(0, 0, 0);"> destination;<br/>
}</span></span></div><div style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="color: rgb(0, 0, 0);"><span style="color: rgb(0, 0, 0);">Prototype 对Object类进行的扩展主要通过一个静态函数<strong style="color: black; background-color: rgb(160, 255, 255);">Object.extend</strong>(destination, source)实现了<strong style="color: black; background-color: rgb(255, 255, 102);">JavaScript</strong>中的继承。 从语义的角度, <strong style="color: black; background-color: rgb(160, 255, 255);">Object.extend</strong>(destination, source)方法有些不和逻辑, 因为它事实上仅仅实现了从源对象到目标对象的全息拷贝。不过你也可以这样认为：由于目标对象拥有了所有源对象所拥有的特性, 所以看上去就像目标对象继承了源对象(并加以扩展)一样。另外, Prototype对Object扩展了几个比较有用的静态方法, 所有其他的类可以通过调用这些静态方法获取支持。</span></span></div><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="color: rgb(0, 0, 0);">JScript code</span></span></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="color: rgb(0, 0, 0);"><strong style="color: black; background-color: rgb(160, 255, 255);">Object.extend</strong> <span style="color: rgb(0, 0, 0);">=</span> <span style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 0);">(destination, source) { </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 一个静态方法表示继承, 目标对象将拥有源对象的所有属性和方法</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 0, 0);"> (</span><span style="color: rgb(0, 0, 255);">var</span><span style="color: rgb(0, 0, 0);"> property </span><span style="color: rgb(0, 0, 255);">in</span><span style="color: rgb(0, 0, 0);"> source) {<br/>
    destination[property] </span><span style="color: rgb(0, 0, 0);">=</span><span style="color: rgb(0, 0, 0);"> source[property];   </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 利用动态语言的特性, 通过赋值动态添加属性与方法</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">}<br/></span><span style="color: rgb(0, 0, 255);">return</span><span style="color: rgb(0, 0, 0);"> destination;   </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 返回扩展后的对象</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">}<br/><br/><strong style="color: black; background-color: rgb(160, 255, 255);">Object.extend</strong>(Object, { <br/>
inspect: </span><span style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 0);">(object) {   </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 一个静态方法, 传入一个对象, 返回对象的字符串表示</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">    </span><span style="color: rgb(0, 0, 255);">try</span><span style="color: rgb(0, 0, 0);"> {<br/>
      </span><span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 0, 0);"> (object </span><span style="color: rgb(0, 0, 0);">==</span><span style="color: rgb(0, 0, 0);"> undefined) </span><span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 0, 0);">'</span><span style="color: rgb(0, 0, 0);">undefined</span><span style="color: rgb(0, 0, 0);">'</span><span style="color: rgb(0, 0, 0);">; </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 处理undefined情况</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">      </span><span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 0, 0);"> (object </span><span style="color: rgb(0, 0, 0);">==</span> <span style="color: rgb(0, 0, 255);">null</span><span style="color: rgb(0, 0, 0);">) </span><span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 0, 0);">'</span><span style="color: rgb(0, 0, 0);">null</span><span style="color: rgb(0, 0, 0);">'</span><span style="color: rgb(0, 0, 0);">;     </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 处理null情况</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">      </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 如果对象定义了inspect方法, 则调用该方法返回, 否则返回对象的toString()值</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">      </span><span style="color: rgb(0, 0, 255);">return</span><span style="color: rgb(0, 0, 0);"> object.inspect </span><span style="color: rgb(0, 0, 0);">?</span><span style="color: rgb(0, 0, 0);"> object.inspect() : object.toString(); <br/>
    } </span><span style="color: rgb(0, 0, 255);">catch</span><span style="color: rgb(0, 0, 0);"> (e) {<br/>
      </span><span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 0, 0);"> (e </span><span style="color: rgb(0, 0, 255);">instanceof</span><span style="color: rgb(0, 0, 0);"> RangeError) </span><span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 0, 0);">'</span><span style="color: rgb(0, 0, 0);">...</span><span style="color: rgb(0, 0, 0);">'</span><span style="color: rgb(0, 0, 0);">; </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 处理异常情况</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">      </span><span style="color: rgb(0, 0, 255);">throw</span><span style="color: rgb(0, 0, 0);"> e;<br/>
    }<br/>
},<br/>
keys: </span><span style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 0);">(object) {     </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 一个静态方法, 传入一个对象, 返回该对象中所有的属性, 构成数组返回</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">    </span><span style="color: rgb(0, 0, 255);">var</span><span style="color: rgb(0, 0, 0);"> keys </span><span style="color: rgb(0, 0, 0);">=</span><span style="color: rgb(0, 0, 0);"> [];<br/>
    </span><span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 0, 0);"> (</span><span style="color: rgb(0, 0, 255);">var</span><span style="color: rgb(0, 0, 0);"> property </span><span style="color: rgb(0, 0, 255);">in</span><span style="color: rgb(0, 0, 0);"> object)<br/>
      keys.push(property);     </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 将每个属性压入到一个数组中</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">    </span><span style="color: rgb(0, 0, 255);">return</span><span style="color: rgb(0, 0, 0);"> keys;<br/>
},<br/>
values: </span><span style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 0);">(object) {   </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 一个静态方法, 传入一个对象, 返回该对象中所有属性所对应的值, 构成数组返回</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">    </span><span style="color: rgb(0, 0, 255);">var</span><span style="color: rgb(0, 0, 0);"> values </span><span style="color: rgb(0, 0, 0);">=</span><span style="color: rgb(0, 0, 0);"> [];<br/>
    </span><span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 0, 0);"> (</span><span style="color: rgb(0, 0, 255);">var</span><span style="color: rgb(0, 0, 0);"> property </span><span style="color: rgb(0, 0, 255);">in</span><span style="color: rgb(0, 0, 0);"> object) values.push(object[property]); </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 将每个属性的值压入到一个数组中</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">    </span><span style="color: rgb(0, 0, 255);">return</span><span style="color: rgb(0, 0, 0);"> values;<br/>
},<br/>
clone: </span><span style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 0);">(object) {    </span><span style="color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);"> 一个静态方法, 传入一个对象, 克隆一个新对象并返回</span><span style="color: rgb(0, 128, 0);"><br/></span><span style="color: rgb(0, 0, 0);">    </span><span style="color: rgb(0, 0, 255);">return</span><span style="color: rgb(0, 0, 0);"> <strong style="color: black; background-color: rgb(160, 255, 255);">Object.extend</strong>({}, object);<br/>
}</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif;"><span style="background-color: rgb(255, 255, 255);">});</span></span></span></div></span>
</div></body></html> 