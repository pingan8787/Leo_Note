<html>
<head>
  <title>62- cookies，sessionStorage 和 localStorage 的区别？</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1787"/>
<h1>62- cookies，sessionStorage 和 localStorage 的区别？</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/6/22 星期四 12:00</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/6/22 星期四 12:01</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><ul style="margin: 5px 0px 5px 40px; padding: 0px; color: rgb(102, 102, 102); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px;"><li><p style="margin-top: 0px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px;">请描述一下 cookies，sessionStorage 和 localStorage 的区别？</p></li></ul><div style="color: rgb(102, 102, 102); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; vertical-align: baseline;"><span style="font-family:Arial, sans-serif;font-size:12px;color:#ff0000;">sessionStorage 和 localStorage 是HTML5 Web </span><span style="color:#ff0000;"><span style="font-family: Arial, sans-serif;font-size:12px;">Storage API 提供的，可以方便的在web请求之间保存数据。有了本地数据，就可以避免数据在浏览器和服务器间不必要地来回传递。</span></span></div><div style="color: rgb(102, 102, 102); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; vertical-align: baseline;"><span style="color:#ff0000;"><span style="font-family: Arial, sans-serif;font-size:12px;"><br/></span></span></div><div style="color: rgb(102, 102, 102); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; vertical-align: baseline;"><span style="color:#ff0000;"><span style="font-family: Arial, sans-serif;font-size:12px;"><span style="font-size: 13px;"><span style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">sessionStorage、localStorage、cookie都是在浏览器端存储的数据，其中sessionStorage的概念很特别，引入了一个“浏览器窗口”的概念。sessionStorage是在同源的同窗口（或tab）中，始终存在的数据。也就是说只要这个浏览器窗口没有关闭，即使刷新页面或进入同源另一页面，数据仍然存在。</span><span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px;">关闭窗口后，sessionStorage即被销毁。同时“独立”打开的不同窗口，即使是同一页面，sessionStorage对象也是不同的。</span></span></span></span></div><div style="font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline;"><span style="font-family: Arial, sans-serif;font-size:12px;"><span style="font-size: 13px;"><span style="color: rgb(68, 68, 68); font-family: Arial, Helvetica, sans-serif; font-size: 14px;"><br/></span></span></span></div><div style="font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; font-size: 16px; background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline;"><div style="margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background-color: transparent;"><span style="color: rgb(51, 51, 51); font-family: Arial, sans-serif;font-size:12px;"><span style="font-family: Arial, Helvetica, sans-serif; color: rgb(0, 0, 0); font-size: 14px;"><span style="font-family:Arial, sans-serif;font-size:12px;color:#333333;">Web </span><span style="color: rgb(51, 51, 51); font-family: Arial, sans-serif;font-size:12px;">Storage</span></span>带来的好处：</span></div><div style="margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background-color: transparent;"><ol style="margin: 5px 0px 5px 40px; padding: 0px;"><li><span style="font-family:Arial, sans-serif;font-size:12px;color:#333333;">减少网络流量：一旦数据保存在本地后，就可以避免再向服务器请求数据，因此减少不必要的数据请求，减少</span><span style="color: rgb(51, 51, 51); font-family: Arial, sans-serif;font-size:12px;">数据在浏览器和服务器间不必要地来回传递。</span></li><li><span style="font-family:Arial, sans-serif;font-size:12px;color:#333333;">快速显示数据：性能好，从本地读数据比通过网络从服务器获得数据快得多，本地数据可以即时获得。再加上网页本身也可以有缓存，因此整个页面和数据都在本地的话，可以立即显示。</span></li><li><span style="font-family:Arial, sans-serif;font-size:12px;color:#333333;">临时存储：很多时候数据只需要在用户浏览一组页面期间使用，关闭窗口后数据就可以丢弃了，这种情况使用</span><span style="color: rgb(68, 68, 68);">sessionStorage非常方便。</span></li></ol></div></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="color: rgb(102, 102, 102); font-size: 16px; background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="font-size:14px;color:#0000ff;"><strong>浏览器本地存储与服务器端存储之间的区别</strong></span></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">其实数据既可以在浏览器本地存储，也可以在服务器端存储。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">浏览器端可以保存一些数据，需要的时候直接从本地获取，sessionStorage、localStorage和cookie都由浏览器存储在本地的数据。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">服务器端也可以保存所有用户的所有数据，但需要的时候浏览器要向服务器请求数据。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">1.服务器端可以保存用户的持久数据，如数据库和云存储将用户的大量数据保存在服务器端。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">2.服务器端也可以保存用户的临时会话数据。服务器端的session机制，如jsp的 session 对象，数据保存在服务器上。实现上，服务器和浏览器之间仅需传递session id即可，服务器根据session id找到对应用户的session对象。会话数据仅在一段时间内有效，这个时间就是server端设置的session有效期。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">服务器端保存所有的用户的数据，所以服务器端的开销较大，而浏览器端保存则把不同用户需要的数据分布保存在用户各自的浏览器中。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">浏览器端一般只用来存储小数据，而服务器可以存储大数据或小数据。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">服务器存储数据安全一些，浏览器只适合存储一般数据。</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="font-size: 16px; background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="font-size:14px;color:#0000ff;"><strong>sessionStorage 、localStorage 和 cookie 之间的区别</strong></span><br/></div><div style="color: rgb(102, 102, 102); background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="color:#ff0000;">共同点：都是保存在浏览器端，且同源的。</span></div><div style="color: rgb(102, 102, 102); background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="color:#ff0000;">区别：</span></div><div style="color: rgb(102, 102, 102); background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><ol style="margin: 5px 0px 5px 40px; padding: 0px;"><li><span style="color:#ff0000;">cookie数据始终在同源的http请求中携带（即使不需要），即cookie在浏览器和服务器间来回传递。而sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存。cookie数据还有路径（path）的概念，可以限制cookie只属于某个路径下。</span></li><li><span style="color:#ff0000;">存储大小限制也不同，cookie数据不能超过4k，同时因为每次http请求都会携带cookie，所以cookie只适合保存很小的数据，如会话标识。sessionStorage和localStorage 虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大。</span></li><li><span style="color:#ff0000;">数据有效期不同，sessionStorage：仅在当前浏览器窗口关闭前有效，自然也就不可能持久保持；localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；cookie只在设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭。</span></li><li><span style="color:#ff0000;">作用域不同，sessionStorage<strong>不在</strong>不同的浏览器窗口中共享，即使是同一个页面；localStorage 在所有同源窗口中都是共享的；cookie也是在所有同源窗口中都是共享的。</span></li><li><span style="color:#ff0000;"><span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px;"><span style="font-family:Arial, sans-serif;font-size:12px;">Web </span><span style="font-family: Arial, sans-serif;font-size:12px;">Storage 支持事件通知机制，可以将数据更新的通知发送给监听者。</span></span></span></li><li><span style="color:#ff0000;"><span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px;"><span style="font-family:Arial, sans-serif;font-size:12px;">Web </span><span style="font-family: Arial, sans-serif;font-size:12px;">Storage </span></span>的 api 接口使用更方便。</span></li></ol></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="color: rgb(102, 102, 102); background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="color:#0000ff;"><span style="font-size:14px;"><strong>sessionStorage </strong></span><span style="font-size:14px;"><strong>和 </strong></span><span style="font-size:14px;"><strong>localStorage 之间的区别</strong></span></span></div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;">见上面的区别3、4</div><div style="background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><br/></div><div style="font-size: 16px; background-color: transparent; color: rgb(51, 51, 51); margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="font-size:14px;"><strong>s<span style="color:#0000ff;">essionStorage与页面 js 数据对象的区别</span></strong></span><br/></div><div style="color: rgb(102, 102, 102); background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><span style="color:#ff0000;">页面中一般的 js 对象或数据的生存期是仅在当前页面有效，因此刷新页面或转到另一页面这样的重新加载页面的情况，数据就不存在了。</span></div><div style="color: rgb(102, 102, 102); background-color: transparent; margin: 0px; padding: 0px; border: 0px none; outline: none 0px; font-size: 13px; vertical-align: baseline; font-family: Arial, sans-serif;"><div><span style="color:#ff0000;">而sessionStorage 只要同源的同窗口（或tab）中，<span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px;">刷新页面或进入同源的不同页面，</span>数据始终存在。也就是说只要这个浏览器窗口没有关闭，加载新页面或重新加载，数据仍然存在。</span></div></div></div></span>
</div></body></html> 