<html>
<head>
  <title>23-JavaSript模块规范 - AMD规范与CMD规范介绍</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1603"/>
<h1>23-JavaSript模块规范 - AMD规范与CMD规范介绍</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/11 星期六 15:34</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/3/11 星期六 15:38</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><a href="http://blog.chinaunix.net/uid-26672038-id-4112229.html">http://blog.chinaunix.net/uid-26672038-id-4112229.html</a></div><div><br/></div><div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="color:#337FE5;font-size:16px;"><strong>扩展阅读：</strong></span></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">AMD规范文档 <a href="https://github.com/amdjs/amdjs-api/wiki/AMD" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/amdjs/amdjs-api/wiki/AMD</span></a><br/>
amdjs 的 require 接口文档 <a href="https://github.com/amdjs/amdjs-api/wiki/require" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/amdjs/amdjs-api/wiki/require</span></a><br/>
amdjs 的接口文档 <a href="https://github.com/amdjs/amdjs-api/wiki" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/amdjs/amdjs-api/wiki</span></a><div>RequireJS官网接口文档  <a href="http://www.requirejs.org/docs/api.html" style="cursor:pointer;"><span style="color:#337FE5;">http://www.requirejs.org/docs/api.html</span></a><span style="color:#337FE5;"> </span></div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><div>模块系统 <a href="https://github.com/seajs/seajs/issues/240" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/240</span></a></div><div>前端模块化开发的价值 <a href="https://github.com/seajs/seajs/issues/547" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/547</span></a></div><div>前端模块化开发那点历史 <a href="https://github.com/seajs/seajs/issues/588" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/588</span></a></div><div>CMD 模块定义规范 <a href="https://github.com/seajs/seajs/issues/242" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/242</span></a></div><div>SeaJS API快速参考 <a href="https://github.com/seajs/seajs/issues/266" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/266</span></a></div><div>从 CommonJS 到 Sea.js <a href="https://github.com/seajs/seajs/issues/269" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/269</span></a><span style="color:#337FE5;">    </span></div></div><blockquote style="font-family:微软雅黑;font-size:14px;white-space:normal;margin:0px 0px 0px 40px;border:none;padding:0px;"><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px;"><br/></blockquote></blockquote><span style="font-family:微软雅黑;font-size:14px;white-space:normal;">RequireJS和AMD规范  </span><a href="http://..ruanyifeng.com/tool/requirejs.html" style="cursor:pointer;font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="color:#337FE5;">http://javascript.ruanyifeng.com/tool/requirejs.html</span></a><span style="font-family:微软雅黑;font-size:14px;white-space:normal;color:#337FE5;"> </span><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">CommonJS规范  <a href="http://..ruanyifeng.com/nodejs/commonjs.html" style="cursor:pointer;"><span style="color:#337FE5;">http://javascript.ruanyifeng.com/nodejs/commonjs.html</span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">Javascript模块化编程 <a href="http://www.ruanyifeng.com/blog/2012/10/._module.html" style="cursor:pointer;"><span style="color:#337FE5;">http://www.ruanyifeng.com/blog/2012/10/javascript_module.html</span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">Javascript模块化编程 <a href="http://www.ruanyifeng.com/blog/2012/10/asynchronous_module_definition.html" style="cursor:pointer;"><span style="color:#337FE5;">http://www.ruanyifeng.com/blog/2012/10/asynchronous_module_definition.html</span></a></div><blockquote style="font-family:微软雅黑;font-size:14px;white-space:normal;margin:0px 0px 0px 40px;border:none;padding:0px;"><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px;"><br/></blockquote></blockquote><span style="font-family:微软雅黑;font-size:14px;white-space:normal;">知乎  AMD 和 CMD 的区别有哪些？ </span><a href="http://www.zhihu.com/question/20351507" style="cursor:pointer;font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="color:#337FE5;">http://www.zhihu.com/question/20351507</span></a><span style="font-family:微软雅黑;font-size:14px;white-space:normal;color:#337FE5;"> </span><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="white-space: normal;"><span style="font-size: 14px;">JavaScript模块化开发 - CommonJS规范 <a href="http://www.feeldesignstudio.com/2013/09/.-module-pattern-commonjs" style="cursor:pointer;"><span style="color:#337FE5;">http://www.feeldesignstudio.com/2013/09/javascript-module-pattern-commonjs</span></a><span style="color:#337FE5;"> </span><br/>
JavaScript模块化开发 - AMD规范 <a href="http://www.feeldesignstudio.com/2013/09/.-module-pattern-amd" style="cursor:pointer;"><span style="color:#337FE5;">http://www.feeldesignstudio.com/2013/09/javascript-module-pattern-amd</span><br/></a><br/>
模块化设计 <a href="http://baike.baidu.com/view/189730.htm" style="cursor:pointer;"><span style="color:#337FE5;">http://baike.baidu.com/view/189730.htm</span></a><span style="color:#337FE5;"> </span></span><div><span style="font-size: 14px;">模块化  <a href="http://baike.baidu.com/view/182267.htm" style="cursor:pointer;"><span style="color:#337FE5;">http://baike.baidu.com/view/182267.htm</span></a><span style="color:#337FE5;"> </span></span></div><div><span style="font-size: 14px;"><span style="color: rgb(51, 127, 229);"><br/></span></span></div><div><span style="font-size: 14px;"><span style="color: rgb(51, 127, 229);"><br/></span></span></div><div><span style="font-size: 14px;"><span style="color: rgb(51, 127, 229);"><br/></span></span></div><div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><h2><span style="color:#003399;font-size:18px;">JavaSript模块化</span></h2><div><span style="color:#003399;font-size:18px;"><br/></span></div>
    在了解AMD，CMD规范前，还是需要先来简单地了解下什么是模块化，模块化开发？</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    模块化是指在解决某一个复杂问题或者一系列的杂糅问题时，依照一种分类的思维把问题进行系统性的分解以之处理。模块化是一种处理复杂系统分解为代码结构更合理，可维护性更高的可管理的模块的方式。可以想象一个巨大的系统代码，被整合优化分割成逻辑性很强的模块时，对于软件是一种何等意义的存在。对于软件行业来说：解耦软件系统的复杂性，使得不管多么大的系统，也可以将管理，开发，维护变得“有理可循”。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    还有一些对于模块化一些专业的定义为：模块化是软件系统的属性，这个系统被分解为一组高内聚，低耦合的模块。那么在理想状态下我们只需要完成自己部分的核心业务逻辑代码，其他方面的依赖可以通过直接加载被人已经写好模块进行使用即可。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><div>首先，既然是模块化设计，那么作为一个模块化系统所必须的能力：</div><div>    1. 定义封装的模块。</div><div>    2. 定义新模块对其他模块的依赖。</div><div>    3. 可对其他模块的引入支持。</div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    好了，思想有了，那么总要有点什么来建立一个模块化的规范制度吧，不然各式各样的模块加载方式只会将局搅得更为混乱。那么在JavaScript中出现了一些非传统模块开发方式的规范 CommonJS的模块规范，AMD（Asynchronous Module Definition），CMD（Common Module Definition）等。</div><h2><b><span style="font-family:'Microsoft YaHei';font-size:24px;color:#003399;"><br/></span></b></h2><div><b><span style="font-family:'Microsoft YaHei';font-size:24px;color:#003399;"><br/></span></b></div><h2><b><span style="font-family:'Microsoft YaHei';font-size:18px;color:#003399;">AMD 与 RequireJS</span></b></h2><h3><b><span style="font-size:18px;color:#337FE5;font-family:'Microsoft YaHei';">AMD</span></b></h3><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    Asynchronous Module Definition，用白话文讲就是 异步模块定义，对于 JSer 来说，异步是再也熟悉不过的词了，所有的模块将被异步加载，模块加载不影响后面语句运行。所有依赖某些模块的语句均放置在回调函数中。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    AMD规范定义了一个自由变量或者说是全局变量 define 的函数。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><p>   <strong> </strong><span style="font-size:14px;color:#4C33E5;"><span style="color:#009900;font-family:'Microsoft YaHei';"><strong>define( id?, dependencies?, factory );</strong></span> <strong><span style="font-family:'Microsoft YaHei';"> </span></strong></span> <strong><span style="font-family:'Microsoft YaHei';"> </span></strong></p><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="cursor:pointer;">    AMD规范  <span style="cursor:pointer;color:#337FE5;"><a href="https://github.com/amdjs/amdjs-api/wiki/AMD" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/amdjs/amdjs-api/wiki/AMD</span></a></span></span></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><div>    第一个参数 id 为字符串类型，表示了模块标识，为可选参数。若不存在则模块标识应该默认定义为在加载器中被请求脚本的标识。如果存在，那么模块标识必须为顶层的或者一个绝对的标识。</div><div>    第二个参数，dependencies ，是一个当前模块依赖的，已被模块定义的模块标识的数组字面量。</div><div>    第三个参数，factory，是一个需要进行实例化的函数或者一个对象。</div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    创建模块标识为 alpha 的模块，依赖于 require， export，和标识为 beta 的模块  </div><blockquote style="font-family:微软雅黑;font-size:14px;white-space:normal;margin:0px 0px 0px 40px;border:none;padding:0px;"></blockquote><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">&quot;alpha&quot;</span><span style="color:#0000CC;">,</span> <span style="color:#0000CC;">[</span> <span style="color:#FF00FF;">&quot;require&quot;</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">&quot;exports&quot;</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">&quot;beta&quot;</span> <span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> beta <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">export</span><span style="color:#0000CC;">.</span>verb <span style="color:#0000CC;">=</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>        <span style="color:#0000FF;">return</span> beta<span style="color:#0000CC;">.</span>verb<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>        <span style="color:#FF9900;">// or:</span><br/></li><li>        <span style="color:#0000FF;">return</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">&quot;beta&quot;</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">.</span>verb<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    一个返回对象字面量的异步模块</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000CC;">[</span><span style="color:#FF00FF;">&quot;alpha&quot;</span><span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> alpha <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">return</span> <span style="color:#0000CC;">{</span><br/></li><li>        verb <span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>            <span style="color:#0000FF;">return</span> alpha<span style="color:#0000CC;">.</span>verb<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span> <span style="color:#0000CC;">+</span> 1 <span style="color:#0000CC;">;</span><br/></li><li>        <span style="color:#0000CC;">}</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    无依赖模块可以直接使用对象字面量来定义</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#FF0000;">add</span> <span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> <span style="color:#FF0000;">x</span><span style="color:#0000CC;">,</span> <span style="color:#FF0000;">y</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>        <span style="color:#0000FF;">return</span> <span style="color:#FF0000;">x</span> <span style="color:#0000CC;">+</span> <span style="color:#FF0000;">y</span> <span style="color:#0000CC;">;</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    类似与 CommonJS 方式定义</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module<span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">var</span> a <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'a'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">,</span><br/></li><li>          b <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'b'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><br/></li><li>    exports<span style="color:#0000CC;">.</span><span style="color:#FF0000;">action</span> <span style="color:#0000CC;">=</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><p> <span style="font-family:Microsoft YaHei;">  </span><strong><span style="font-family:'Microsoft YaHei';"> </span></strong><span style="font-size:14px;color:#009900;font-family:'Microsoft YaHei';"><strong>require();  </strong></span></p><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="cursor:pointer;">    require API 介绍 <a href="https://github.com/amdjs/amdjs-api/wiki/require" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/amdjs/amdjs-api/wiki/require</span></a></span></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    在 AMD 规范中的 require 函数与一般的 CommonJS中的 require 不同。由于动态检测依赖关系使加载异步，对于基于回调的 require 需求强烈。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><p>   <strong><span style="font-family:'Microsoft YaHei';"> </span></strong><span style="font-size:14px;color:#009900;font-family:'Microsoft YaHei';"><strong>局部 与 全局 的require</strong></span></p><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    局部的 require 需要在AMD模式中的 define 工厂函数中传入 require。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000CC;">[</span><span style="color:#FF00FF;">'require'</span><span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>  <span style="color:#FF9900;">// ...</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>or：<br/></li><li>define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>  <span style="color:#FF9900;">// ...</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    局部的 require 需要其他特定的 API 来实现。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    全局的 require 函数是唯一全局作用域下的变量，像 define一样。全局的 require 并不是规范要求的，但是如果实现全局的 require函数，那么其需要具有与局部 require 函数 一样的以下的限定：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    1. 模块标识视为绝对的，而不是相对的对应另一个模块标识。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    2. 只有在异步情况下，require的回调方式才被用来作为交互操作使用。因为他不可能在同步的情况下通过 require(String) 从顶层加载模块。<br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    依赖相关的API会开始模块加载。如果需要有互操作的多个加载器，那么全局的 reqiure 应该被加载顶层模块来代替。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">require<span style="color:#0000CC;">(</span><span style="color:#FF0000;">String</span><span style="color:#0000CC;">)</span><br/></span></li><li>define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>    <span style="color:#0000FF;">var</span> a <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'a'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span> <span style="color:#FF9900;">// 加载模块a</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><br/></li><li>require<span style="color:#0000CC;">(</span><span style="color:#FF0000;">Array</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">Function</span><span style="color:#0000CC;">)</span><br/></li><li>define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>    require<span style="color:#0000CC;">(</span> <span style="color:#0000CC;">[</span><span style="color:#FF00FF;">'a'</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">'b'</span><span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> a<span style="color:#0000CC;">,</span>b <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span> <span style="color:#FF9900;">// 加载模块a b 使用</span><br/></li><li>        <span style="color:#FF9900;">// 依赖 a b 模块的运行代码</span><br/></li><li>    <span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><br/></li><li>require<span style="color:#0000CC;">.</span>toUrl<span style="color:#0000CC;">(</span> <span style="color:#FF0000;">Url</span> <span style="color:#0000CC;">)</span><br/></li><li>define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>    <span style="color:#0000FF;">var</span> temp <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">.</span>toUrl<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'./temp/a.html'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span> <span style="color:#FF9900;">// 加载页面</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    amdjs 的API   <a href="https://github.com/amdjs/amdjs-api/wiki" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/amdjs/amdjs-api/wiki</span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><h3><b><span style="font-size:18px;color:#337FE5;">RequireJS</span></b></h3><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    官网 <a href="http://www.requirejs.org/" style="cursor:pointer;"><span style="color:#337FE5;">http://www.requirejs.org/</span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    API <a href="http://www.requirejs.org/docs/api.html" style="cursor:pointer;"><span style="color:#337FE5;">http://www.requirejs.org/docs/api.html</span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    RequireJS 是一个前端的模块化管理的工具库，遵循AMD规范，它的作者就是AMD规范的创始人 James Burke。所以说RequireJS是对AMD规范的阐述一点也不为过。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    RequireJS 的基本思想为：通过一个函数来将所有所需要的或者说所依赖的模块实现装载进来，然后返回一个新的函数（模块），我们所有的关于新模块的业务代码都在这个函数内部操作，其内部也可无限制的使用已经加载进来的以来的模块。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;"><span style="color:#0000CC;">&lt;</span><span style="color:#FF0000;">script</span> <span style="color:#FF0000;">data</span><span style="color:#0000CC;">-</span>main<span style="color:#0000CC;">=</span><span style="color:#FF00FF;">'scripts/main'</span> <span style="color:#FF0000;">src</span><span style="color:#0000CC;">=</span><span style="color:#FF00FF;">'scripts/require.js'</span><span style="color:#0000CC;">&gt;</span><span style="color:#0000CC;">&lt;</span><span style="color:#0000CC;">/</span><span style="color:#FF0000;">script</span><span style="color:#0000CC;">&gt;</span></span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    那么scripts下的main.js则是指定的主代码脚本文件，所有的依赖模块代码文件都将从该文件开始异步加载进入执行。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">   <strong> </strong><span style="color:#009900;font-family:'Microsoft YaHei';"><strong>defined用于定义模块，RequireJS要求每个模块均放在独立的文件之中。按照是否有依赖其他模块的情况分为独立模块和非独立模块。</strong></span></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    1. 独立模块，不依赖其他模块。直接定义：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000CC;">{</span><br/></span></li><li>    method1<span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span><span style="color:#0000CC;">,</span><br/></li><li>    method2<span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    也等价于<br/><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">return</span><span style="color:#0000CC;">{</span><br/></li><li>        method1<span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span><span style="color:#0000CC;">,</span><br/></li><li>        method2<span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    2. 非独立模块，对其他模块有依赖。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000CC;">[</span> <span style="color:#FF00FF;">'module1'</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">'module2'</span> <span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span>m1<span style="color:#0000CC;">,</span> m2<span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000CC;">.</span><span style="color:#0000CC;">.</span><span style="color:#0000CC;">.</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    或者：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">var</span> m1 <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span> <span style="color:#FF00FF;">'module1'</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">,</span><br/></li><li>          m2 <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span> <span style="color:#FF00FF;">'module2'</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    <span style="color:#0000CC;">.</span><span style="color:#0000CC;">.</span><span style="color:#0000CC;">.</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    简单看了一下RequireJS的实现方式，其 require 实现只不过是将 function 字符串然后提取 require 之后的模块名，将其放入依赖关系之中。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">   <strong><span style="color:#009900;"> </span></strong><strong><span style="color:#009900;">require方法调用模块</span></strong></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    在require进行调用模块时，其参数与define类似。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">require<span style="color:#0000CC;">(</span> <span style="color:#0000CC;">[</span><span style="color:#FF00FF;">'foo'</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">'bar'</span><span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> foo<span style="color:#0000CC;">,</span> bar <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    foo<span style="color:#0000CC;">.</span>func<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    bar<span style="color:#0000CC;">.</span>func<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    在加载 foo 与 bar 两个模块之后执行回调函数实现具体过程。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    当然还可以如之前的例子中的，在define定义模块内部进行require调用模块</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">var</span> m1 <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span> <span style="color:#FF00FF;">'module1'</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">,</span><br/></li><li>          m2 <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span> <span style="color:#FF00FF;">'module2'</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    <span style="color:#0000CC;">.</span><span style="color:#0000CC;">.</span><span style="color:#0000CC;">.</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    define 和 require 这两个定义模块，调用模块的方法合称为AMD模式，定义模块清晰，不会污染全局变量，清楚的显示依赖关系。AMD模式可以用于浏览器环境并且允许非同步加载模块，也可以按需动态加载模块。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><br/></div><h2><b><span style="font-size:24px;color:#003399;font-family:'Microsoft YaHei';">CMD 与 seaJS</span></b></h2><h3><b><span style="font-size:18px;color:#337FE5;font-family:'Microsoft YaHei';">CMD</span></b></h3><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    在CMD中，一个模块就是一个文件，格式为：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    <strong><span style="color:#009900;">define( factory );</span></strong></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    全局函数define，用来定义模块。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    参数 factory  可以是一个函数，也可以为对象或者字符串。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    当 factory 为对象、字符串时，表示模块的接口就是该对象、字符串。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    定义JSON数据模块：<br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000CC;">{</span> <span style="color:#FF00FF;">&quot;foo&quot;</span><span style="color:#0000CC;">:</span> <span style="color:#FF00FF;">&quot;bar&quot;</span> <span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></span></span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    通过字符串定义模板模块：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'this is {{data}}.'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    factory 为函数的时候，表示模块的构造方法，执行构造方法便可以得到模块向外提供的接口。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span>require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module<span style="color:#0000CC;">)</span> <span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#FF9900;">// 模块代码</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"> <span style="font-family:Microsoft YaHei;">   </span><span style="color:#009900;font-family:'Microsoft YaHei';"><strong>define( id?, deps?, factory );</strong></span></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    define也可以接受两个以上的参数，字符串id为模块标识，数组deps为模块依赖：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#FF00FF;">'module'</span><span style="color:#0000CC;">,</span> <span style="color:#0000CC;">[</span><span style="color:#FF00FF;">'module1'</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">'module2'</span><span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#FF9900;">// 模块代码</span><br/></li><li><span style="color:#0000CC;">}</span> <span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    其与 AMD 规范用法不同。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    <span style="color:#009900;"><strong>require</strong></span> 是 factory 的第一个参数。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    require( id );</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    接受模块标识作为唯一的参数，用来获取其他模块提供的接口：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">var</span> a <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'./a'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    a<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    require.async( id, callback? );</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    require是同步往下执行的，需要的异步加载模块可以使用 require.async 来进行加载：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span>require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module<span style="color:#0000CC;">)</span> <span style="color:#0000CC;">{</span><br/></span></li><li>    require<span style="color:#0000CC;">.</span>async<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'.a'</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span>a<span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>        a<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    <span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    require.resolve( id )</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    可以使用模块内部的路径机制来返回模块路径，不会加载模块。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    <span style="color:#009900;"><strong>exports</strong></span> 是 factory 的第二个参数，用来向外提供模块接口。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    exports<span style="color:#0000CC;">.</span>foo <span style="color:#0000CC;">=</span> <span style="color:#FF00FF;">'bar'</span><span style="color:#0000CC;">;</span> <span style="color:#FF9900;">// 向外提供的属性</span><br/></li><li>    exports<span style="color:#0000CC;">.</span><span style="color:#0000FF;">do</span> <span style="color:#0000CC;">=</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span><span style="color:#0000CC;">;</span> <span style="color:#FF9900;">// 向外提供的方法</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    当然也可以使用 return 直接向外提供接口。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    <span style="color:#0000FF;">return</span><span style="color:#0000CC;">{</span><br/></li><li>        foo <span style="color:#0000CC;">:</span> <span style="color:#FF00FF;">'bar'</span><span style="color:#0000CC;">,</span> <span style="color:#FF9900;">// 向外提供的属性</span><br/></li><li>        <span style="color:#0000FF;">do</span> <span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span> <span style="color:#FF9900;">// 向外提供的方法</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    也可以简化为直接对象字面量的形式:</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000CC;">{</span><br/></span></li><li>    foo <span style="color:#0000CC;">:</span> <span style="color:#FF00FF;">'bar'</span><span style="color:#0000CC;">,</span> <span style="color:#FF9900;">// 向外提供的属性</span><br/></li><li>    <span style="color:#0000FF;">do</span> <span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span> <span style="color:#FF9900;">// 向外提供的方法</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    与nodeJS中一样需要注意的是，一下方式是错误的：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    exports <span style="color:#0000CC;">=</span> <span style="color:#0000CC;">{</span><br/></li><li>        foo <span style="color:#0000CC;">:</span> <span style="color:#FF00FF;">'bar'</span><span style="color:#0000CC;">,</span> <span style="color:#FF9900;">// 向外提供的属性</span><br/></li><li>        <span style="color:#0000FF;">do</span> <span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span> <span style="color:#FF9900;">// 向外提供的方法</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    需要这么做</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;">define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span> require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module <span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></span></li><li>    module<span style="color:#0000CC;">.</span>exports <span style="color:#0000CC;">=</span> <span style="color:#0000CC;">{</span><br/></li><li>        foo <span style="color:#0000CC;">:</span> <span style="color:#FF00FF;">'bar'</span><span style="color:#0000CC;">,</span> <span style="color:#FF9900;">// 向外提供的属性</span><br/></li><li>        <span style="color:#0000FF;">do</span> <span style="color:#0000CC;">:</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><span style="color:#0000CC;">}</span> <span style="color:#FF9900;">// 向外提供的方法</span><br/></li><li>    <span style="color:#0000CC;">}</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    传入的对象引用可以添加属性，一旦赋值一个新的对象，那么值钱传递进来的对象引用就会失效了。开始之初，exports 是作为 module.exports 的一个引用存在，一切行为只有在这个引用上 factory 才得以正常运行，赋值新的对象后就会断开引用，exports就只是一个新的对象引用，对于factory来说毫无意义，就会出错。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="color:#009900;"><strong>    module</strong></span> 是factory的第三个参数，为一个对象，上面存储了一些与当前模块相关联的属性与方法。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">        module.id 为模块的唯一标识。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">        module.uri 根据模块系统的路径解析规则得到模块的绝对路径。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">        module.dependencies 表示模块的依赖。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">        module.exports 当前模块对外提供的接口。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><br/></div><h3><b><span style="font-size:18px;color:#337FE5;font-family:'Microsoft YaHei';">seaJS</span></b></h3><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    官网 <a href="http://seajs.org/docs/" style="cursor:pointer;"><span style="color:#337FE5;">http://seajs.org/docs/</span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    API快速参考<span style="color:#337FE5;"> </span><a href="https://github.com/seajs/seajs/issues/266" style="cursor:pointer;"><span style="color:#337FE5;">https://github.com/seajs/seajs/issues/266<br/></span></a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    sea.js 核心特征：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">        1. 遵循CMD规范，与NodeJS般的书写模块代码。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">        2. 依赖自动加载，配置清晰简洁。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    兼容 Chrome 3+，Firefox 2+，Safari 3.2+，Opera 10+，IE 5.5+。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><span style="color:#009900;"><strong>    seajs.use </strong></span></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    用来在页面中加载一个或者多个模块</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;"><span style="color:#FF9900;">// 加载一个模块</span><br/></span></li><li>seajs<span style="color:#0000CC;">.</span>use<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'./a'</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#FF9900;">// 加载模块，加载完成时执行回调</span><br/></li><li>seajs<span style="color:#0000CC;">.</span>use<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'./a'</span>，function<span style="color:#0000CC;">(</span>a<span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>    a<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#FF9900;">// 加载多个模块执行回调</span><br/></li><li>seajs<span style="color:#0000CC;">.</span>use<span style="color:#0000CC;">(</span><span style="color:#0000CC;">[</span><span style="color:#FF00FF;">'./a'</span><span style="color:#0000CC;">,</span><span style="color:#FF00FF;">'./b'</span><span style="color:#0000CC;">]</span>，function<span style="color:#0000CC;">(</span>a <span style="color:#0000CC;">,</span> b<span style="color:#0000CC;">)</span><span style="color:#0000CC;">{</span><br/></li><li>    a<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li>    b<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><span style="color:#0000CC;">;</span></li></ol></div></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    其define 与 require 使用方式基本就是CMD规范中的示例。<br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div><b><span style="font-size:24px;color:#003399;font-family:'Microsoft YaHei';"><span style="font-size:18px;"><br/></span></span></b></div><h2><b><span style="font-size:24px;color:#003399;font-family:'Microsoft YaHei';"><span style="font-size:18px;">AMD 与 CMD 区别到底在哪里？</span></span></b></h2><div><b><span style="font-size:24px;color:#003399;font-family:'Microsoft YaHei';"><span style="font-size:18px;"><br/></span></span></b></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    看了以上 AMD，requireJS 与 CMD， seaJS的简单介绍会有点感觉模糊，总感觉较为相似。因为像 requireJS 其并不是只是纯粹的AMD固有思想，其也是有CMD规范的思想，只不过是推荐 AMD规范方式而已， seaJS也是一样。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    下面是玉伯对于 AMD 与 CMD 区别的解释：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    AMD 是 RequireJS 在推广过程中对模块定义的规范化产出。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    CMD 是 SeaJS 在推广过程中对模块定义的规范化产出。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    类似的还有 CommonJS Modules/2.0 规范，是 BravoJS 在推广过程中对模块定义的规范化产出还有不少??</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    这些规范的目的都是为了 JavaScript 的模块化开发，特别是在浏览器端的。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    目前这些规范的实现都能达成浏览器端模块化开发的目的。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    区别：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    1. 对于依赖的模块，AMD 是提前执行，CMD 是延迟执行。不过 RequireJS 从 2.0 开始，也改成可以延迟执行（根据写法不同，处理方式不同）。CMD 推崇 as lazy as possible.</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    2. CMD 推崇依赖就近，AMD 推崇依赖前置。看代码：</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/><div><ol start="1" style="margin:0 1px 0 0px;padding-left:40px;"><li><span style="color:#000000;"><span style="color:#FF9900;">// CMD</span><br/></span></li><li>define<span style="color:#0000CC;">(</span><span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span>require<span style="color:#0000CC;">,</span> exports<span style="color:#0000CC;">,</span> module<span style="color:#0000CC;">)</span> <span style="color:#0000CC;">{</span><br/></li><li>    <span style="color:#0000FF;">var</span> a <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'./a'</span><span style="color:#0000CC;">)</span><br/></li><li>    a<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><br/></li><li>    <span style="color:#FF9900;">// 此处略去 100 行</span><br/></li><li>    <span style="color:#0000FF;">var</span> b <span style="color:#0000CC;">=</span> require<span style="color:#0000CC;">(</span><span style="color:#FF00FF;">'./b'</span><span style="color:#0000CC;">)</span> <span style="color:#FF9900;">// 依赖可以就近书写</span><br/></li><li>    b<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><br/></li><li>    <span style="color:#FF9900;">// ...</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span><br/></li><li><br/></li><li><span style="color:#FF9900;">// AMD 默认推荐的是</span><br/></li><li>define<span style="color:#0000CC;">(</span><span style="color:#0000CC;">[</span><span style="color:#FF00FF;">'./a'</span><span style="color:#0000CC;">,</span> <span style="color:#FF00FF;">'./b'</span><span style="color:#0000CC;">]</span><span style="color:#0000CC;">,</span> <span style="color:#0000FF;">function</span><span style="color:#0000CC;">(</span>a<span style="color:#0000CC;">,</span> b<span style="color:#0000CC;">)</span> <span style="color:#0000CC;">{</span> <span style="color:#FF9900;">// 依赖必须一开始就写好</span><br/></li><li>    a<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><br/></li><li>    <span style="color:#FF9900;">// 此处略去 100 行</span><br/></li><li>    b<span style="color:#0000CC;">.</span>doSomething<span style="color:#0000CC;">(</span><span style="color:#0000CC;">)</span><br/></li><li>    <span style="color:#FF9900;">// ...</span><br/></li><li><span style="color:#0000CC;">}</span><span style="color:#0000CC;">)</span></li></ol></div><br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">虽然 AMD 也支持 CMD 的写法，同时还支持将 require 作为依赖项传递，但 RequireJS 的作者默认是最喜欢上面的写法，也是官方文档里默认的模块定义写法。<br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    3. AMD 的 API 默认是一个当多个用，CMD 的 API 严格区分，推崇职责单一。比如 AMD 里，require 分全局 require 和局部 require，都叫 require。CMD 里，没有全局 require，而是根据模块系统的完备性，提供 seajs.use 来实现模块系统的加载启动。CMD 里，每个 API 都简单纯粹。<br/></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">    4. 还有一些细节差异，具体看这个规范的定义就好，就不多说了。</div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;">另外，SeaJS 和 RequireJS 的差异，可以参考：<a href="https://github.com/seajs/seajs/issues/277" style="cursor:pointer;">https://github.com/seajs/seajs/issues/277</a></div><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><br/></div><h2><b><span style="font-size:18px;font-family:'Microsoft YaHei';color:#003399;">总结</span></b></h2><div style="font-family:微软雅黑;font-size:14px;white-space:normal;"><div>    本文主要是介绍了一下 AMD CMD的规范，顺便简单的讲述了一下 requireJS 与 seaJS。讲的较为笼统，下面的扩展阅读可以更好的帮助你理解模块化以及各个规范。</div></div></div></div></div></span>
</div></body></html> 