<html>
<head>
  <title>5-案例 Gruntfile.js</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1493"/>
<h1>5-案例 Gruntfile.js</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/3/16 星期四 10:22</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/3/16 星期四 10:34</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><ul><li>案例1 ： <a href="http://www.cnblogs.com/chengj/p/3784242.html">http://www.cnblogs.com/chengj/p/3784242.html</a></li><li>案例2 ： </li></ul><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;"><div><span style="color: #ce9178;">'use strict'</span><span style="color: #d4d4d4;">;</span></div><br/><div><span style="color: #4ec9b0;">module</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">exports</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">grunt</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #608b4e;">// 1.引入模块</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #dcdcaa;">require</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'load-grunt-tasks'</span><span style="color: #d4d4d4;">)(</span><span style="color: #9cdcfe;">grunt</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #dcdcaa;">require</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'time-grunt'</span><span style="color: #d4d4d4;">)(</span><span style="color: #9cdcfe;">grunt</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #608b4e;">// 项目路径配置</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">var</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">config</span><span style="color: #d4d4d4;"> = {</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">app:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'app'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">dist:</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'dist'</span></div><div><span style="color: #d4d4d4;">    }</span></div><br/><div><span style="color: #d4d4d4;">    </span><span style="color: #608b4e;">// 3.任务配置</span></div><div><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">grunt</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">initConfig</span><span style="color: #d4d4d4;">({</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #608b4e;">// 3.1 声明配置</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">config:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">config</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #608b4e;">// 3.2 安装配置task</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #608b4e;">// npm install grunt-contrib-copy --save-dev</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #608b4e;">// npm install grunt-contrib-clean --save-dev</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">copy:</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">/** 第1种 一般用在只读项目 **/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// dist_html: {</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  // src：源文件 ； dest：目标文件</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  src:'&lt;%= config.app %&gt;/index.html',</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  dest:'&lt;%= config.dist %&gt;/index.html'</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// },</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// dist_js: {</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  src:'&lt;%= config.app %&gt;/js/index.js',</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  dest:'&lt;%= config.dist %&gt;/js/index.js'</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// }</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">/** 第2种 数组形式 **/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// dist_html: {</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  files: [</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//      {</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//          src:'&lt;%= config.app %&gt;/index.html',</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//          dest:'&lt;%= config.dist %&gt;/index.html'</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//      },</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//      {</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//          src:'&lt;%= config.app %&gt;/js/index.js',</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//          dest:'&lt;%= config.dist %&gt;/js/index.js'</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//      }</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//  ]</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// }</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">/** 第3种 对象形式 **/</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">dist_html:</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">files:</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #608b4e;">// 键：目标 值：源文件(可以是数组)</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #ce9178;">'&lt;%= config.dist %&gt;/index.html'</span><span style="color: #9cdcfe;">:</span><span style="color: #ce9178;">'&lt;%= config.app %&gt;/index.html'</span><span style="color: #d4d4d4;">,</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #ce9178;">'&lt;%= config.dist %&gt;/js/index.js'</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;">[</span><span style="color: #ce9178;">'&lt;%= config.app %&gt;/js/index.js'</span><span style="color: #d4d4d4;">]</span></div><div><span style="color: #d4d4d4;">                }</span></div><div><span style="color: #d4d4d4;">                </span></div><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        },</span></div><div><span style="color: #d4d4d4;">        </span><span style="color: #9cdcfe;">clean:</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #9cdcfe;">dist:</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">/** 第1种 **/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// src:[</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// '&lt;%= config.dist %&gt;/index.html',</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// '&lt;%= config.dist %&gt;/js/index.js'</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// ]</span></div><div><span style="color: #d4d4d4;">            </span><span style="color: #608b4e;">/** 第2种 通配符形式清除所有 **/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">src:</span><span style="color: #d4d4d4;"> [</span><span style="color: #ce9178;">'&lt;%= config.dist %&gt;/**/*'</span><span style="color: #d4d4d4;">],</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// *匹配任意字符，不匹配/  ?匹配一个字符，不匹配/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// ** 匹配任意数量的任意字符，包括/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">//3.3 过滤器 过滤文件夹</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">/** 第1种 使用现有filter **/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">// filter: 'isFile'</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #608b4e;">/** 第2种 自定义filter **/</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">filter:</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">filepath</span><span style="color: #d4d4d4;">){</span></div><div><span style="color: #d4d4d4;">                    </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">(!</span><span style="color: #9cdcfe;">grunt</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">file</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">isDir</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">filepath</span><span style="color: #d4d4d4;">));</span><span style="color: #608b4e;">//grunt内置函数isDir()</span></div><div><span style="color: #d4d4d4;">                },</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">dot:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;">, </span><span style="color: #608b4e;">//true 命中以.开头的文件</span></div><div><span style="color: #d4d4d4;">                </span><span style="color: #9cdcfe;">matchBase:</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">true</span><span style="color: #d4d4d4;"> </span><span style="color: #608b4e;">//.... 更多看笔记</span></div><br/><div><span style="color: #d4d4d4;">            }</span></div><div><span style="color: #d4d4d4;">        }</span></div><div><span style="color: #d4d4d4;">    });</span></div><div><span style="color: #d4d4d4;">}</span></div><br/></div><div><span style="font-size: 14px;"><span style="font-family: Consolas, 'Courier New', monospace;"><span style="color: rgb(212, 212, 212);"><br/></span></span></span></div></span>
</div></body></html> 