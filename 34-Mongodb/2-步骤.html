<html>
<head>
  <title>2-步骤</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="539"/>
<h1>2-步骤</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/12 星期三 14:30</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/6/22 星期四 17:28</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><font color="#FF0000" size="4"><span><b>安装步骤</b></span></font></div><div><b><span style="font-size: 16px;"><span style="color: rgb(255, 0, 0);">1-mis文件安装</span></span></b></div><div><b><span style="font-size: 16px;"><span style="color: rgb(255, 0, 0);">2-配置环境变量 我的电脑 属性 环境变量 path 加入mongodb的bin文件夹目录 如D:\MongoDB\bin</span></span></b></div><div><b><span style="font-size: 16px;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="color: rgb(255, 0, 0);">3-OK</span></span></span></b></div><div><b><span style="font-size: 16px;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="color: rgb(255, 0, 0);"><br/></span></span></span></b></div><div><span style="font-size: 16px;"><span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">CMD文件快速启动</span></b></span></span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">编辑.cmd文件，内容：</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">d:</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">cd Mongodb/bin</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">mongod --config d:\mongodb\bin\mongodb.config</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div>在 D:\MongoDB\bin&gt;<u>mongo</u>  <u>启动</u></div><div><br/></div><div>1-启动步骤</div><ol><li>   D:\MongoDB\bin&gt;<u>mongod --config d:\mongodb\bin\mongodb.config</u></li><li>   D:\MongoDB\bin&gt;<u>mongo</u>  <u>启动</u></li></ol><div>2-创建库、表</div><ol><li>  创建库  use dbName</li><li>  创建表  db.createCollection('表名')     </li><li>          ==&gt;隐式创建：db.collectionName.insert({name:&quot;jack&quot;,age: 30}); //直接创建</li><li>  查看库  show databases  / show dbs</li><li>  查看表  show collections</li></ol><div>3-操作</div><ol><li>  添加   db.tableName.insert({name:&quot;jack&quot;,age: 30});</li><li>  查看   db.tableName.find()</li><li>  删除collection  db.collectionName.drop()</li><li>  删除database   db.dropDatabase()</li></ol><div>4-CURD操作 collection</div><ol><li>  增  db.collectionName.insert({name:'leo',age:16})</li></ol><div style="margin-left:40px;">         ==&gt;传多个文档用<span style="color: rgb(255, 0, 0);"><b>数组</b></span> db.collectionName.insert( <span style="color: rgb(255, 0, 0);"><b>[</b></span>{name:'leo',age:16} ,{_id:011,name:'zhangfei',age:16} ,{_id:002,name:'guanyu',age:16}<span style="color: rgb(255, 0, 0);"><b>]</b></span> )</div><div style="margin-left:40px;">         ==&gt;默认自动生成<b>_id</b>，可以手动指定<b>_id</b>传入</div><div>     2.    删  db.collectionName.remove(<u>查询表达式，选项</u>)   </div><div>                  查询表达式： db.user.remove(  <span style="color: rgb(255, 0, 0);"><b>{_id:2}</b></span>  )</div><div>                  选项：justOne:true 默认false 是否只删除一行  db.user.remove(  <span style="color: rgb(255, 0, 0);"><b>{_id:2}</b></span><span style="color: rgb(255, 0, 0);"><b>,true</b></span>   ) 或者  db.user.remove(  <span style="color: rgb(255, 0, 0);"><b>{_id:2}</b></span><span style="color: rgb(255, 0, 0);"><b>,1</b></span>   )</div><div>                  <b>注意</b>：查询表达式是个json对象，匹配成功将被删除，如果不写表达式，collections中所有文档都会被删除</div><ol start="3"><li>  改  db.collectionName.update( <u>查询表达式，新值， 选项</u> )  
<ol><li> db.main.update( {name:'caocao'} , {name:'wangpingan'} )</li><li>或者 db.main.update( {name:'caocao'} , {<span style="color: rgb(227, 0, 0);"><b>$set :{</b></span><span style="color: rgb(227, 0, 0);"><b> </b></span>name : 'wangpingan' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} )</li><li>5个选项：
<ol><li>$set  修改某列的值  ；  db.main.update( {name:'caocao'} , {<span style="color: rgb(227, 0, 0);"><b>$set :{</b></span><span style="color: rgb(227, 0, 0);"><b> </b></span>name : 'wangpingan' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} )</li><li>$unset 删除指定的列  ；  db.main.update( {name:'caocao'} , {<span style="color: rgb(227, 0, 0);"><b>$unset :{</b></span><span style="color: rgb(227, 0, 0);"><b> </b></span>name : 'wangpingan' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} )</li><li>$rename 重命名某个列 ；  db.main.update( {name:'caocao'} , {<span style="color: rgb(227, 0, 0);"><b>$rename :{</b></span> <span style="color: rgb(227, 0, 0);"><b>name</b></span> : 'nickname' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} )    { 旧列名，新列名 }</li><li>$nic 增长某个列 自增 ;  db.main.update( {name:'caocao'} , {<span style="color: rgb(227, 0, 0);"><b>$nic :{</b></span><span style="color: rgb(227, 0, 0);"><b> </b></span>age : '16' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} )</li><li>$setInInsert 当upsert为true时，并且发生insert操作是，可以补充的字段</li></ol></li><li><u>选项</u>  默认值修改一行，若要修改多行，添加multi选项 db.main.update( {name:'caocao'} ,{<span style="color: rgb(227, 0, 0);"><b>$set :{</b></span><span style="color: rgb(227, 0, 0);"><b> </b></span>name : 'wangpingan' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} ，{ multi:true } )</li><li><u>选项</u>  upsert 如果匹配不到这行，则添加这行 db.main.update( {name:'caocao'} ,{<span style="color: rgb(227, 0, 0);"><b>$set :{</b></span><span style="color: rgb(227, 0, 0);"><b> </b></span>name : 'wangpingan' <span style="color: rgb(227, 0, 0);"><b>} </b></span>} ，{ upsert:true } )</li></ol></li><li>  查  db.collectionName. find( 查询表达式 ， 查询列 )
<ol><li>db.main.find( )查询所有文档内容    ==&gt;查询数据多少条 db.main.find().count()</li><li>db.main.find( { } ,{ name : 1 } )  查询所有文档的name内容，默认_id都会查询</li><li>db.main.find( { }, {name:<span style="color: rgb(255, 0, 0);"><b>1</b></span>, _id:<span style="color: rgb(255, 0, 0);"><b>0</b></span> } )  查询所有文档的name内容，不查询id   //需要查出来的选项值<span style="color: rgb(255, 0, 0);"><b>1</b></span> ，不需要查出来 <span style="color: rgb(255, 0, 0);"><b>0</b></span></li><li>db.main.find( {age:12 }, {name:1,_id:0 } )</li></ol></li></ol><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>注意 </div><div>1 -  <span style="background-color:rgb(255,255,255)"><span style="color:#33cc00">正确关闭mongodb的方法是<span style="font-family:arial; font-size:13px;">db.shutdownServer()</span></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 204, 0);"><br/></span></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 204, 0);"><br/></span></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 204, 0);">查询表达式:</span></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">1: 最简单的查询表达式</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">{filed:value} ,是指查询field列的值为value的文档</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">2: <b><span style="color: rgb(255, 0, 0);">$ne</span></b> --- != 查询表达式   db.taobao.find({&quot;oPrice&quot;:{$ne:&quot;19.9&quot;}  })    查数量 </span></span><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">db.taobao.find({&quot;oPrice&quot;:{$ne:&quot;19.9&quot;}  })</span></span> <span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">.count()</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);"><b>大于$gt</b></span>  db.taobao.find({&quot;oPrice&quot;:{$gt:&quot;15.5&quot;}},{&quot;_id&quot;:0,&quot;pic&quot;:0,&quot;promotionPrice&quot;:0,&quot;canbuy&quot;:0})</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);"><b>小于$lt  </b></span> db.taobao.find({&quot;oPrice&quot;:{$lt:&quot;19.9&quot;}},{&quot;_id&quot;:0,&quot;pic&quot;:0,&quot;promotionPrice&quot;:0,&quot;canbuy&quot;:0}) </span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);"><b>大于</b></span></span></span><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);"><b>等于</b></span></span></span><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);"><b>$gte</b></span></span></span> </div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);"><b>小于等于$lte</b></span></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">{field:{$nq:value}}</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">作用--查filed列的值 不等于 value 的文档</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">3: <span style="color: rgb(255, 0, 0);"><b>$nin</b></span> --&gt; not in</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">4: <span style="color: rgb(255, 0, 0);"><b>$all</b></span></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">语法: {field:{$all:[v1,v2..]}}</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">是指取出 field列是一个数组,且至少包含 v1,v2值</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">5: $exists</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">语法: {field:{$exists:1}}</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">作用: 查询出含有field字段的文档</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">$or</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">$and   db.taobao.find( { <b>$and:[ </b></span></span><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><u><b><span style="color: rgb(65, 173, 28);">{</span></b></u></span></span> <span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><u>&quot;oPrice&quot;:{$gte:&quot;19.9&quot;}}</u> ,</span></span><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><u>{</u></span></span><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><u>&quot;oPrice&quot;:{$lte:&quot;55.5&quot;}}</u>  <b>]</b> <span style="color: rgb(65, 173, 28);"><b>}</b></span> )</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">$not</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">6: $nor,</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">{$nor,[条件1,条件2]}</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">是指  所有条件都不满足的文档为真返回</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">7:用正则表达式查询 以”诺基亚”开头的商品</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">例:db.goods.find({goods_name:/诺基亚<span style="color: rgb(255, 0, 0);"><b>.*</b></span>/},{goods_name:1});</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">8: 用$where表达式来查询</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">例: db.goods.find({$where:'this.cat_id != 3 &amp;&amp; this.cat_id != 11'});</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">注意: 用$where查询时, mongodb是把bson结构的二进制数据转换为json结构的对象,</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">然后比较对象的属性是否满足表达式.</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">速度较慢</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">Update时可用的操作符</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">例:</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">-&gt;db.user.insert({name:'lisi',age:12,sex:'male',height:123,area:'haidian'});</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">-&gt;db.user.update({name:'lisi'},{$set:{area:'chaoyang'},$unset:{height:1},$inc:{age:1},$rename:{sex:'gender'}});</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">&gt; db.user.find();</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">{ &quot;_id&quot; : ObjectId(&quot;51fc01c4f5de93e1f2856e33&quot;), &quot;age&quot; : 13, &quot;area&quot; : &quot;chaoyang&quot;, &quot;gender&quot; : &quot;male&quot;, &quot;name&quot; : &quot;lisi&quot; }</span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="font-family: arial;"><span style="background-color: rgb(255, 255, 255);">$setOnInsert -&gt;相当于mysql中的列的默认值</span></span></div></span>
</div></body></html> 