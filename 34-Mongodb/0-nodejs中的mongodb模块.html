<html>
<head>
  <title>0-nodejs中的mongodb模块</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="452"/>
<h1>0-nodejs中的mongodb模块</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/25 星期二 16:53</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/5/16 星期二 16:35</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><br/></div><ul><li>NodeJS+Express+MongoDB   <a href="http://www.cnblogs.com/best/p/6212807.html">www.cnblogs.com/best/p/6212807.html</a></li><li>从无到有，用Nodejs+express+mongodb搭建简易登陆系统 <a href="http://www.cnblogs.com/hutuzhu/p/4487143.html">www.cnblogs.com/hutuzhu/p/4487143.html</a></li><li>    ↑<span style="color: rgb(255, 0, 0);"><b>记得安装mongoose模块</b></span></li><li>nodejs操作mongodb   <a href="http://www.cnblogs.com/whoamme/p/3467374.html">www.cnblogs.com/whoamme/p/3467374.html</a></li><li>Nodejs基于mongoose模块的增删改查  blog.csdn.net/nick_php/article/details/52215987</li><li>Nodejs基于mongodb模块的增删改查  blog.csdn.net/nick_php/article/details/52215987   m1999.iteye.com/blog/2026227</li><li><span style="color: rgb(255, 0, 0);"> nodejs+mongodb做项目的详解(最新)     <a href="https://cnodejs.org/topic/547293caa3e2aee40698df0b">https://cnodejs.org/topic/547293caa3e2aee40698df0b</a></span></li><li><span style="color: rgb(255, 0, 0);">Nodejs学习笔记（十）--- 与MongoDB的交互（mongodb/node-mongodb-native）、MongoDB入门 <a href="http://www.cnblogs.com/zhongweiv/p/node_mongodb.html#node_r">www.cnblogs.com/zhongweiv/p/node_mongodb.html#node_r</a></span></li><li><span style="color: rgb(255, 0, 0);">node.js+mongodb 爬虫 www.cnblogs.com/auok/p/6349842.html</span></li></ul><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 21px;"><span style="color: rgb(255, 0, 0);"><b>一 . 增删改查</b></span></span></div><div style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 16px;"><div><span style="color: #569cd6;">var</span> <span style="color: #9cdcfe;">mongodb</span> <span style="color: #d4d4d4;">=</span> <span style="color: #dcdcaa;">require</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'mongodb'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #569cd6;">var</span> <span style="color: #9cdcfe;">server</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">mongodb</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">Server</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'localhost'</span><span style="color: #d4d4d4;">,</span> <span style="color: #b5cea8;">27017</span><span style="color: #d4d4d4;">, {</span> <span style="color: #9cdcfe;">auto_reconnect:</span> <span style="color: #569cd6;">true</span> <span style="color: #d4d4d4;">});</span></div><div><span style="color: #569cd6;">var</span> <span style="color: #9cdcfe;">db</span> <span style="color: #d4d4d4;">=</span> <span style="color: #569cd6;">new</span> <span style="color: #4ec9b0;">mongodb</span><span style="color: #d4d4d4;">.</span><span style="color: #4ec9b0;">Db</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'user'</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">server</span><span style="color: #d4d4d4;">, {</span> <span style="color: #9cdcfe;">safe:</span> <span style="color: #569cd6;">true</span> <span style="color: #d4d4d4;">});</span></div><div><span style="color: #9cdcfe;">db</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">open</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">db</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #c586c0;">if</span> <span style="color: #d4d4d4;">(!</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'连接成功了~~~'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #9cdcfe;">db</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">collection</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'res'</span><span style="color: #d4d4d4;">, {</span> <span style="color: #9cdcfe;">safe:</span> <span style="color: #569cd6;">true</span> <span style="color: #d4d4d4;">},</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">collection</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #608b4e;">//增 操作</span></div><div><span style="color: #9cdcfe;">collection</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">insert</span><span style="color: #d4d4d4;">({</span> <span style="color: #ce9178;">&quot;_id&quot;</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">2</span><span style="color: #d4d4d4;">,</span> <span style="color: #ce9178;">&quot;value&quot;</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">&quot;啦啦啦 这是nodejs写出来的222&quot;</span> <span style="color: #d4d4d4;">}, {</span> <span style="color: #9cdcfe;">safe:</span> <span style="color: #569cd6;">true</span> <span style="color: #d4d4d4;">},</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #608b4e;">// console.log(result);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'增加成功'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #608b4e;">//删 操作</span></div><div><span style="color: #9cdcfe;">collection</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">remove</span><span style="color: #d4d4d4;">({</span> <span style="color: #ce9178;">&quot;_id&quot;</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">15</span> <span style="color: #d4d4d4;">}, {</span> <span style="color: #9cdcfe;">safe:</span> <span style="color: #569cd6;">true</span> <span style="color: #d4d4d4;">},</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #608b4e;">// console.log(result);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'删除成功'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #608b4e;">//改 操作</span></div><div><span style="color: #9cdcfe;">collection</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">update</span><span style="color: #d4d4d4;">({</span> <span style="color: #ce9178;">&quot;_id&quot;</span><span style="color: #9cdcfe;">:</span> <span style="color: #b5cea8;">11</span> <span style="color: #d4d4d4;">}, {</span> <span style="color: #9cdcfe;">$set:</span> <span style="color: #d4d4d4;">{</span> <span style="color: #ce9178;">&quot;value&quot;</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">&quot;啦啦啦 nodejs改 操作&quot;</span> <span style="color: #d4d4d4;">} }, {</span> <span style="color: #9cdcfe;">safe:</span> <span style="color: #569cd6;">true</span> <span style="color: #d4d4d4;">},</span> <span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">result</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #608b4e;">// console.log(result);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'修改成功'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #608b4e;">//查 操作</span></div><div><span style="color: #9cdcfe;">collection</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">find</span><span style="color: #d4d4d4;">().</span><span style="color: #dcdcaa;">toArray</span><span style="color: #d4d4d4;">(</span><span style="color: #569cd6;">function</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">,</span> <span style="color: #9cdcfe;">docs</span><span style="color: #d4d4d4;">) {</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'查找到以下内容：'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'find'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">docs</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #d4d4d4;">});</span></div><div><span style="color: #d4d4d4;">}</span> <span style="color: #c586c0;">else</span> <span style="color: #d4d4d4;">{</span></div><div><span style="color: #4ec9b0;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'连接失败，原因：'</span> <span style="color: #d4d4d4;">+</span> <span style="color: #9cdcfe;">err</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">}</span></div><div><span style="color: #d4d4d4;">});</span></div><br/><br/></div><div><b><span style="color: rgb(255, 0, 0);"><br/></span></b></div><div><b><span style="color: rgb(255, 0, 0);"><br/></span></b></div></span>
</div></body></html> 