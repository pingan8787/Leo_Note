<html>
<head>
  <title>2-Map和Set</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1581"/>
<h1>2-Map和Set</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/2/4 星期六 11:12</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/2/4 星期六 11:13</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div style="margin: 0px 0px 15px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(102, 102, 102);">JavaScript的默认对象表示方式</span></span></span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">{}</code><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(102, 102, 102);">可以视为其他语言中的</span></span></span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(102, 102, 102);">或</span></span></span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Dictionary</code><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(102, 102, 102);">的数据结构，即一组键值对。</span></span></span></div></div><div style="margin: 15px 0px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color: rgb(102, 102, 102);">但是JavaScript的对象有个小问题，就是键必须是字符串。但实际上Number或者其他数据类型作为键也是非常合理的。</span></span></span></div></div><div style="margin: 15px 0px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(102, 102, 102);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">为了解决这个问题，最新的ES6规范引入了新的数据类型</span></span></span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code><span style="color: rgb(102, 102, 102);"><span style="font-size: 14px;"><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">。要测试你的浏览器是否支持ES6规范，请执行以下代码，如果浏览器报ReferenceError错误，那么你需要换一个支持ES6的浏览器：</span></span></span></div><div style="margin: 0px; padding: 6px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: none; border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-radius: 3px 3px 0px 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">'use strict';<br/>
var m = new Map();<br/>
var s = new Set();<br/>
alert('你的浏览器支持Map和Set！');<br/></div><div style="margin: 0px 0px 15px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: normal; color: rgb(68, 68, 68); text-transform: none; font-size: 16px; font-style: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-family: Consolas, monospace, serif;"><span style="font-size: 14px;"><br/></span></span></div></div><div style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><h3 style="margin: 25px 0px 15px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: normal; color: rgb(68, 68, 68); text-transform: none; font-size: 18px;">Map</h3><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code>是一组键值对的结构，具有极快的查找速度。</p><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">举个例子，假设要根据同学的名字查找对应的成绩，如果用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Array</code>实现，需要两个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Array</code>：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code><span style="color: rgb(51, 51, 51); font-weight: bold;">var</span> names = [<span style="color: rgb(221, 17, 68);">'Michael'</span>, <span style="color: rgb(221, 17, 68);">'Bob'</span>, <span style="color: rgb(221, 17, 68);">'Tracy'</span>];
<span style="color: rgb(51, 51, 51); font-weight: bold;">var</span> scores = [<span style="color: rgb(0, 153, 153);">95</span>, <span style="color: rgb(0, 153, 153);">75</span>, <span style="color: rgb(0, 153, 153);">85</span>];
</code></pre><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">给定一个名字，要查找对应的成绩，就先要在names中找到对应的位置，再从scores取出对应的成绩，Array越长，耗时越长。</p><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">如果用Map实现，只需要一个“名字”-“成绩”的对照表，直接根据名字查找成绩，无论这个表有多大，查找速度都不会变慢。用JavaScript写一个Map如下：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code><span style="color: rgb(51, 51, 51); font-weight: bold;">var</span> m = <span style="color: rgb(51, 51, 51); font-weight: bold;">new</span> Map([[<span style="color: rgb(221, 17, 68);">'Michael'</span>, <span style="color: rgb(0, 153, 153);">95</span>], [<span style="color: rgb(221, 17, 68);">'Bob'</span>, <span style="color: rgb(0, 153, 153);">75</span>], [<span style="color: rgb(221, 17, 68);">'Tracy'</span>, <span style="color: rgb(0, 153, 153);">85</span>]]);
m.get(<span style="color: rgb(221, 17, 68);">'Michael'</span>); <span style="color: rgb(153, 153, 136); font-style: italic;">// 95</span></code></pre><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">初始化<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code>需要一个二维数组，或者直接初始化一个空<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code>。<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code>具有以下方法：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code><span style="color: rgb(51, 51, 51); font-weight: bold;">var</span> m = <span style="color: rgb(51, 51, 51); font-weight: bold;">new</span> Map(); <span style="color: rgb(153, 153, 136); font-style: italic;">// 空Map</span>
m.set(<span style="color: rgb(221, 17, 68);">'Adam'</span>, <span style="color: rgb(0, 153, 153);">67</span>); <span style="color: rgb(153, 153, 136); font-style: italic;">// 添加新的key-value</span>
m.set(<span style="color: rgb(221, 17, 68);">'Bob'</span>, <span style="color: rgb(0, 153, 153);">59</span>);
m.has(<span style="color: rgb(221, 17, 68);">'Adam'</span>); <span style="color: rgb(153, 153, 136); font-style: italic;">// 是否存在key 'Adam': true</span>
m.get(<span style="color: rgb(221, 17, 68);">'Adam'</span>); <span style="color: rgb(153, 153, 136); font-style: italic;">// 67</span>
m.<span style="color: rgb(51, 51, 51); font-weight: bold;">delete</span>(<span style="color: rgb(221, 17, 68);">'Adam'</span>); <span style="color: rgb(153, 153, 136); font-style: italic;">// 删除key 'Adam'</span>
m.get(<span style="color: rgb(221, 17, 68);">'Adam'</span>); <span style="color: rgb(153, 153, 136); font-style: italic;">// undefined</span></code></pre><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">由于一个key只能对应一个value，所以，多次对一个key放入value，后面的值会把前面的值冲掉：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code>var m = new Map();
m.<span style="color: rgb(51, 51, 51); font-weight: bold;">set</span>(<span style="color: rgb(221, 17, 68);">'Adam'</span>, <span style="color: rgb(0, 153, 153);">67</span>);
m.<span style="color: rgb(51, 51, 51); font-weight: bold;">set</span>(<span style="color: rgb(221, 17, 68);">'Adam'</span>, <span style="color: rgb(0, 153, 153);">88</span>);
m.get('Adam'); // 88
</code></pre><h3 style="margin: 25px 0px 15px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: normal; color: rgb(68, 68, 68); text-transform: none; font-size: 18px;">Set</h3><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>和<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code>类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>中，没有重复的key。</p><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">要创建一个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>，需要提供一个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Array</code>作为输入，或者直接创建一个空<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code><span style="color: rgb(51, 51, 51); font-weight: bold;">var</span> s1 = <span style="color: rgb(51, 51, 51); font-weight: bold;">new</span> Set(); <span style="color: rgb(153, 153, 136); font-style: italic;">// 空Set</span><span style="color: rgb(51, 51, 51); font-weight: bold;">var</span> s2 = <span style="color: rgb(51, 51, 51); font-weight: bold;">new</span> Set([<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>]); <span style="color: rgb(153, 153, 136); font-style: italic;">// 含1, 2, 3</span></code></pre><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">重复元素在<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>中自动被过滤：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code>var s = new <span style="color: rgb(51, 51, 51); font-weight: bold;">Set</span>([<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>, <span style="color: rgb(0, 153, 153);">3</span>, <span style="color: rgb(221, 17, 68);">'3'</span>]);
s; // <span style="color: rgb(51, 51, 51); font-weight: bold;">Set</span> {<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>, <span style="color: rgb(221, 17, 68);">&quot;3&quot;</span>}
</code></pre><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">注意数字<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">3</code>和字符串<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">'3'</code>是不同的元素。</p><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">add(key)</code>方法可以添加元素到<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>中，可以重复添加，但不会有效果：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code><span style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>s.add(<span style="color: rgb(0, 153, 153);">4</span>)
<span style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>s
{<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>, <span style="color: rgb(0, 153, 153);">4</span>}
<span style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>s.add(<span style="color: rgb(0, 153, 153);">4</span>)
<span style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>s
{<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>, <span style="color: rgb(0, 153, 153);">4</span>}
</code></pre><p style="margin: 15px 0px; word-wrap: break-word; white-space: pre-wrap;">通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">delete(key)</code>方法可以删除元素：</p><pre style="margin: 15px 0px; padding: 10px; background: rgb(250, 250, 250); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-radius: 3px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap;"><code>var s = new <span style="color: rgb(51, 51, 51); font-weight: bold;">Set</span>([<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>]);
s; // <span style="color: rgb(51, 51, 51); font-weight: bold;">Set</span> {<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>, <span style="color: rgb(0, 153, 153);">3</span>}
s.<span style="color: rgb(51, 51, 51); font-weight: bold;">delete</span>(<span style="color: rgb(0, 153, 153);">3</span>);
s; // <span style="color: rgb(51, 51, 51); font-weight: bold;">Set</span> {<span style="color: rgb(0, 153, 153);">1</span>, <span style="color: rgb(0, 153, 153);">2</span>}
</code></pre><h3 style="margin: 25px 0px 15px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: normal; color: rgb(68, 68, 68); text-transform: none; font-size: 18px;">小结</h3><div><br/></div><div style="margin: 15px 0px;"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Map</code>和<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Set</code>是ES6标准新增的数据类型，请根据浏览器的支持情况决定是否要使用。</div></div></div></span>
</div></body></html> 