<html>
<head>
  <title>jqGrid表格应用——读取与查询数据   解释</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="962"/>
<h1>jqGrid表格应用——读取与查询数据   解释</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/1/7 星期六 17:32</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/1/8 星期日 13:55</i></td></tr>
<tr><td><b>作者：</b></td><td><i>王平安</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><a href="http://www.helloweba.com/view-blog-164.html">http://www.helloweba.com/view-blog-164.html</a></div><div><a href="http://www.helloweba.com/view-blog-161.html">http://www.helloweba.com/view-blog-161.html</a></div><div><br/></div><div>文档：<a href="http://blog.mn886.net/jqGrid/">http://blog.mn886.net/jqGrid/</a></div><div><br/></div><table style="-evernote-table:true;border-collapse:collapse;width:100%;table-layout:fixed;margin-left:0px;"><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:100%;"><div>遇到分页器不能使用 试试添加下面</div></td></tr><tr><td style="border-style:solid;border-width:1px;border-color:rgb(211,211,211);padding:10px;margin:0px;width:100%;"><div>loadonce:true,    //作用：使分页器正常显示分页</div><div>mtype:'GET'       //作用：使分页器正常显示分页</div></td></tr></table><div><br/></div><div><p style="margin: 6px auto; padding: 0px; text-indent: 2em;">jqGrid可以动态读取和加载外部数据，本文将结合PHP和Mysql给大家讲解如何使用jqGrid读取数据并显示，以及可以通过输入关键字查询数据的ajax交互过程。</p><div style="margin: 0px; padding: 0px; text-align: center;"><img src="jqGrid表格应用——读取与查询数据   解释_files/Image.gif" type="image/gif" alt="jqGrid表格应用——读取与查询数据" style="margin: 4px auto; padding: 1px; border: 1px solid rgb(211, 211, 211); background-color: rgb(232, 245, 254); height: auto;"/></div><div style="margin: 20px auto; padding: 0px; text-align: center;"><a href="http://www.helloweba.com/demo/jqGrid/opt.html" style="margin: 0px 0px 0px 10px; padding: 0.5em 2em 0.55em; color: rgb(217, 238, 247); text-decoration: none; display: inline-block; outline: none; cursor: pointer; text-align: center; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 18px; font-family: &quot;Microsoft yahei&quot;, Arial, Helvetica, sans-serif; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px 1px; border-radius: 0.5em; box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 2px; border: 1px solid rgb(0, 118, 163); background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(rgb(0, 173, 238)), to(rgb(0, 120, 165)));" target="_blank">查看演示</a></div></div><div style="margin: 0px; padding: 0px;"><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">jqGrid本身带有search和edit表格模块，但是这些模块会使得整个插件体积显得有点庞大，而且笔者认为jqGrid的搜索查询和编辑/添加功能不好用，所以笔者放弃jqGrid自有的search和edit表格模块，借助jquery利器来完成相关功能，符合项目的实际应用。</p><h4 style="margin: 0px; padding: 0px; height: 36px; font-size: 16px; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">XHTML</h4><pre style="margin: 6px auto; padding: 4px; border-width: 1px 1px 1px 5px; border-style: solid; border-color: rgb(215, 215, 215); border-image: initial; background: rgb(250, 250, 250); font-size: 12px; white-space: pre-wrap; word-wrap: break-word; color: rgb(66, 66, 66); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;div</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;opt&quot;</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&gt;</span> <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;div</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;query&quot;</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&gt;</span> <br style="margin: 0px; padding: 0px;"/>       <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;label</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&gt;</span>编号：<span style="margin: 0px; padding: 0px; color: navy;">&lt;/label&gt;</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;input</span> <span style="margin: 0px; padding: 0px; color: green;">type</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;text&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">class</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;input&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;sn&quot;</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">/&gt;</span> <br style="margin: 0px; padding: 0px;"/>       <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;label</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&gt;</span>名称：<span style="margin: 0px; padding: 0px; color: navy;">&lt;/label&gt;</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;input</span> <span style="margin: 0px; padding: 0px; color: green;">type</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;text&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">class</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;input&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;title&quot;</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">/&gt;</span> <br style="margin: 0px; padding: 0px;"/>       <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;input</span> <span style="margin: 0px; padding: 0px; color: green;">type</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;submit&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">class</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;btn&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;find_btn&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">value</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;查 询&quot;</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">/&gt;</span> <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy;">&lt;/div&gt;</span> <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;input</span> <span style="margin: 0px; padding: 0px; color: green;">type</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;button&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">class</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;btn&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;add_btn&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">value</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;新 增&quot;</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">/&gt;</span> <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;input</span> <span style="margin: 0px; padding: 0px; color: green;">type</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;button&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">class</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;btn&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;del_btn&quot;</span> <span style="margin: 0px; padding: 0px; color: green;">value</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;删 除&quot;</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">/&gt;</span> <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy;">&lt;/div&gt;</span> <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;table</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;list&quot;</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&gt;</span><span style="margin: 0px; padding: 0px; color: navy;">&lt;/table&gt;</span> <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&lt;div</span> <span style="margin: 0px; padding: 0px; color: green;">id</span>=<span style="margin: 0px; padding: 0px; color: maroon;">&quot;pager&quot;</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">&gt;</span><span style="margin: 0px; padding: 0px; color: navy;">&lt;/div&gt;</span> <br style="margin: 0px; padding: 0px;"/></code></pre><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">我们在建立一个可供查询编号和名称的两个输入框，以及“新增”和“删除”按钮，新增和删除功能在接下来的文章中会专门讲解。此外xhtml中还有一个放置表格的#list(jqGrid生成表格)以及分页条#pager。</p><h4 style="margin: 0px; padding: 0px; height: 36px; font-size: 16px; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">Javascript</h4><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">首先调用jqGrid，我们以本站<a href="http://www.helloweba.com/view-blog-161.html" style="margin: 4px; padding: 0px; color: rgb(51, 102, 153); text-decoration: underline;" target="_blank">jqGrid：强大的表格插件的应用</a>一文中的数据为例，调用jqGrid，生成表格，请看代码和注释。</p><pre style="margin: 6px auto; padding: 4px; border-width: 1px 1px 1px 5px; border-style: solid; border-color: rgb(215, 215, 215); border-image: initial; background: rgb(250, 250, 250); font-size: 12px; white-space: pre-wrap; word-wrap: break-word; color: rgb(66, 66, 66); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="margin: 0px; padding: 0px;">$(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#list&quot;</span>).jqGrid(<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <br style="margin: 0px; padding: 0px;"/>    url:<span style="margin: 0px; padding: 0px; color: teal;">'do.php?action=list'</span>,  <span style="margin: 0px; padding: 0px; color: green;">//请求数据的url地址</span> <br style="margin: 0px; padding: 0px;"/>    datatype: <span style="margin: 0px; padding: 0px; color: teal;">&quot;json&quot;</span>,  <span style="margin: 0px; padding: 0px; color: green;">//请求的数据类型</span> <br style="margin: 0px; padding: 0px;"/>       colNames:[<span style="margin: 0px; padding: 0px; color: teal;">'编号'</span>,<span style="margin: 0px; padding: 0px; color: teal;">'名称'</span>,<span style="margin: 0px; padding: 0px; color: teal;">'主屏尺寸'</span>,<span style="margin: 0px; padding: 0px; color: teal;">'操作系统'</span>,<span style="margin: 0px; padding: 0px; color: teal;">'电池容量'</span>, <span style="margin: 0px; padding: 0px; color: teal;">'价格(￥)'</span>,<span style="margin: 0px; padding: 0px; color: teal;">'操作'</span>], <span style="margin: 0px; padding: 0px; color: green;">//数据列名称（数组）</span> <br style="margin: 0px; padding: 0px;"/>       colModel:[ <span style="margin: 0px; padding: 0px; color: green;">//数据列各参数信息设置</span> <br style="margin: 0px; padding: 0px;"/>           <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'sn'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'sn'</span>, editable:true, width:<span style="margin: 0px; padding: 0px; color: red;">80</span>,align:<span style="margin: 0px; padding: 0px; color: teal;">'center'</span>, title:false<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <br style="margin: 0px; padding: 0px;"/>           <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'title'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'title'</span>, width:<span style="margin: 0px; padding: 0px; color: red;">180</span>, title:false<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <br style="margin: 0px; padding: 0px;"/>           <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'size'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'size'</span>, width:<span style="margin: 0px; padding: 0px; color: red;">120</span><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'os'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'os'</span>, width:<span style="margin: 0px; padding: 0px; color: red;">120</span><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <br style="margin: 0px; padding: 0px;"/>           <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'charge'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'charge'</span>, width:<span style="margin: 0px; padding: 0px; color: red;">100</span>,align:<span style="margin: 0px; padding: 0px; color: teal;">'center'</span><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'price'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'price'</span>, width:<span style="margin: 0px; padding: 0px; color: red;">80</span>,align:<span style="margin: 0px; padding: 0px; color: teal;">'center'</span><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <br style="margin: 0px; padding: 0px;"/>           <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span>name:<span style="margin: 0px; padding: 0px; color: teal;">'opt'</span>,index:<span style="margin: 0px; padding: 0px; color: teal;">'opt'</span>, width:<span style="margin: 0px; padding: 0px; color: red;">80</span>, sortable:false, align:<span style="margin: 0px; padding: 0px; color: teal;">'center'</span><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>         <br style="margin: 0px; padding: 0px;"/>       ], <br style="margin: 0px; padding: 0px;"/>       rowNum:<span style="margin: 0px; padding: 0px; color: red;">10</span>, <span style="margin: 0px; padding: 0px; color: green;">//每页显示记录数</span> <br style="margin: 0px; padding: 0px;"/>       rowList:[<span style="margin: 0px; padding: 0px; color: red;">10</span>,<span style="margin: 0px; padding: 0px; color: red;">20</span>,<span style="margin: 0px; padding: 0px; color: red;">30</span>], <span style="margin: 0px; padding: 0px; color: green;">//分页选项，可以下拉选择每页显示记录数</span> <br style="margin: 0px; padding: 0px;"/>       pager: <span style="margin: 0px; padding: 0px; color: teal;">'#pager'</span>,  <span style="margin: 0px; padding: 0px; color: green;">//表格数据关联的分页条，html元素</span> <br style="margin: 0px; padding: 0px;"/>    autowidth: true, <span style="margin: 0px; padding: 0px; color: green;">//自动匹配宽度</span> <br style="margin: 0px; padding: 0px;"/>    height:<span style="margin: 0px; padding: 0px; color: red;">275</span>,   <span style="margin: 0px; padding: 0px; color: green;">//设置高度</span> <br style="margin: 0px; padding: 0px;"/>    gridview:true, <span style="margin: 0px; padding: 0px; color: green;">//加速显示</span> <br style="margin: 0px; padding: 0px;"/>    viewrecords: true,  <span style="margin: 0px; padding: 0px; color: green;">//显示总记录数</span> <br style="margin: 0px; padding: 0px;"/>    multiselect: true,  <span style="margin: 0px; padding: 0px; color: green;">//可多选，出现多选框</span> <br style="margin: 0px; padding: 0px;"/>    multiselectWidth: <span style="margin: 0px; padding: 0px; color: red;">25</span>, <span style="margin: 0px; padding: 0px; color: green;">//设置多选列宽度</span> <br style="margin: 0px; padding: 0px;"/>    sortable:true,  <span style="margin: 0px; padding: 0px; color: green;">//可以排序</span> <br style="margin: 0px; padding: 0px;"/>    sortname: <span style="margin: 0px; padding: 0px; color: teal;">'id'</span>,  <span style="margin: 0px; padding: 0px; color: green;">//排序字段名</span> <br style="margin: 0px; padding: 0px;"/>    sortorder: <span style="margin: 0px; padding: 0px; color: teal;">&quot;desc&quot;</span>, <span style="margin: 0px; padding: 0px; color: green;">//排序方式：倒序，本例中设置默认按id倒序排序</span> <br style="margin: 0px; padding: 0px;"/>    loadComplete:<span style="margin: 0px; padding: 0px; color: royalblue; font-weight: bold;">function</span>(data)<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <span style="margin: 0px; padding: 0px; color: green;">//完成服务器请求后，回调函数</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span>(data.records==<span style="margin: 0px; padding: 0px; color: red;">0</span>)<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <span style="margin: 0px; padding: 0px; color: green;">//如果没有记录返回，追加提示信息，删除按钮不可用</span> <br style="margin: 0px; padding: 0px;"/>            $(<span style="margin: 0px; padding: 0px; color: teal;">&quot;p&quot;</span>).appendTo($(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#list&quot;</span>)).addClass(<span style="margin: 0px; padding: 0px; color: teal;">&quot;nodata&quot;</span>).html(<span style="margin: 0px; padding: 0px; color: teal;">'找不到相关数据！'</span>); <br style="margin: 0px; padding: 0px;"/>            $(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#del_btn&quot;</span>).attr(<span style="margin: 0px; padding: 0px; color: teal;">&quot;disabled&quot;</span>,true); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">else</span><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <span style="margin: 0px; padding: 0px; color: green;">//否则，删除提示，删除按钮可用</span> <br style="margin: 0px; padding: 0px;"/>            $(<span style="margin: 0px; padding: 0px; color: teal;">&quot;p.nodata&quot;</span>).remove(); <br style="margin: 0px; padding: 0px;"/>            $(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#del_btn&quot;</span>).removeAttr(<span style="margin: 0px; padding: 0px; color: teal;">&quot;disabled&quot;</span>); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span> <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span> <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>); <br style="margin: 0px; padding: 0px;"/></code></pre><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">关于jqGrid相关选项设置请参照：<a href="http://www.helloweba.com/view-blog-162.html" style="margin: 4px; padding: 0px; color: rgb(51, 102, 153); text-decoration: underline;" target="_blank">jqGrid中文说明文档——选项设置</a>。</p><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">此外，当我们点击“查询”按钮的时候，向后台php程序发送查询关键字请求，jqGrid根据服务端返回的结果进行响应，请看代码。</p><pre style="margin: 6px auto; padding: 4px; border-width: 1px 1px 1px 5px; border-style: solid; border-color: rgb(215, 215, 215); border-image: initial; background: rgb(250, 250, 250); font-size: 12px; white-space: pre-wrap; word-wrap: break-word; color: rgb(66, 66, 66); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="margin: 0px; padding: 0px;">$(<span style="margin: 0px; padding: 0px; color: royalblue; font-weight: bold;">function</span>()<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <br style="margin: 0px; padding: 0px;"/>    $(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#find_btn&quot;</span>).click(<span style="margin: 0px; padding: 0px; color: royalblue; font-weight: bold;">function</span>()<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">var</span> title = escape($(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#title&quot;</span>).val()); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">var</span> sn = escape($(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#sn&quot;</span>).val()); <br style="margin: 0px; padding: 0px;"/>        $(<span style="margin: 0px; padding: 0px; color: teal;">&quot;#list&quot;</span>).jqGrid(<span style="margin: 0px; padding: 0px; color: teal;">'setGridParam'</span>,<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span> <br style="margin: 0px; padding: 0px;"/>            url:<span style="margin: 0px; padding: 0px; color: teal;">&quot;do.php?action=list&quot;</span>, <br style="margin: 0px; padding: 0px;"/>            postData:<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">{</span><span style="margin: 0px; padding: 0px; color: teal;">'title'</span>:title,<span style="margin: 0px; padding: 0px; color: teal;">'sn'</span>:sn<span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>, <span style="margin: 0px; padding: 0px; color: green;">//发送数据</span> <br style="margin: 0px; padding: 0px;"/>            page:<span style="margin: 0px; padding: 0px; color: red;">1</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>).trigger(<span style="margin: 0px; padding: 0px; color: teal;">&quot;reloadGrid&quot;</span>); <span style="margin: 0px; padding: 0px; color: green;">//重新载入</span> <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>); <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: red; font-weight: bold;">}</span>); <br style="margin: 0px; padding: 0px;"/></code></pre><h4 style="margin: 0px; padding: 0px; height: 36px; font-size: 16px; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">PHP</h4><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">在上两段JS代码代码中，可以看到读取列表和查询业务请求的后台url地址都是do.php?action=list，后台php代码负责根据条件查询mysql数据表中的数据，并将数据以JSON格式返回给前端jqGrid，请看php代码：</p><pre style="margin: 6px auto; padding: 4px; border-width: 1px 1px 1px 5px; border-style: solid; border-color: rgb(215, 215, 215); border-image: initial; background: rgb(250, 250, 250); font-size: 12px; white-space: pre-wrap; word-wrap: break-word; color: rgb(66, 66, 66); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">include_once</span> (<span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;connect.php&quot;</span>); <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">action</span> = <span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'action'</span>]; <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">switch</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">action</span>) { <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">case</span> <span style="margin: 0px; padding: 0px; color: purple;">'list'</span> : <span style="margin: 0px; padding: 0px; color: green;">//列表</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">page</span> = <span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'page'</span>];  <span style="margin: 0px; padding: 0px; color: green;">//获取请求的页数</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">limit</span> = <span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'rows'</span>]; <span style="margin: 0px; padding: 0px; color: green;">//获取每页显示记录数</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">sidx</span> = <span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'sidx'</span>];  <span style="margin: 0px; padding: 0px; color: green;">//获取默认排序字段</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">sord</span> = <span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'sord'</span>];  <span style="margin: 0px; padding: 0px; color: green;">//获取排序方式</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span> (!<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">sidx</span>) <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">sidx</span> = <span style="margin: 0px; padding: 0px; color: red;">1</span>; <br style="margin: 0px; padding: 0px;"/> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">where</span> = <span style="margin: 0px; padding: 0px; color: purple;">''</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">title</span> = uniDecode(<span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'title'</span>],<span style="margin: 0px; padding: 0px; color: purple;">'utf-8'</span>); <span style="margin: 0px; padding: 0px; color: green;">//获取查询关键字：名称</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span>(!<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">empty</span>(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">title</span>)) <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">where</span> .= <span style="margin: 0px; padding: 0px; color: fuchsia;">&quot; and title like '%&quot;</span>.<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">title</span>.<span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;%'&quot;</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">sn</span> = uniDecode(<span style="margin: 0px; padding: 0px; color: red;">$_GET</span>[<span style="margin: 0px; padding: 0px; color: purple;">'sn'</span>],<span style="margin: 0px; padding: 0px; color: purple;">'utf-8'</span>); <span style="margin: 0px; padding: 0px; color: green;">//获取查询关键字：编号</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span>(!<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">empty</span>(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">sn</span>)) <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">where</span> .= <span style="margin: 0px; padding: 0px; color: fuchsia;">&quot; and sn='$sn'&quot;</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: green;">//执行SQL</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">result</span> = mysql_query(<span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;SELECT COUNT(*) AS count FROM products where deleted=0&quot;</span>.<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">where</span>); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span> = mysql_fetch_array(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">result</span>, MYSQL_ASSOC); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">count</span> = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'count'</span>]; <span style="margin: 0px; padding: 0px; color: green;">//获取总记录数</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: green;">//根据记录数分页</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">count</span> &gt; <span style="margin: 0px; padding: 0px; color: red;">0</span>) { <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">total_pages</span> = ceil(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">count</span> / <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">limit</span>); <br style="margin: 0px; padding: 0px;"/>        } <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">else</span> { <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">total_pages</span> = <span style="margin: 0px; padding: 0px; color: red;">0</span>; <br style="margin: 0px; padding: 0px;"/>        } <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">page</span> &gt; <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">total_pages</span>) <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">page</span> = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">total_pages</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">start</span> = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">limit</span> * <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">page</span> - <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">limit</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">start</span> &lt; <span style="margin: 0px; padding: 0px; color: red;">0</span> ) <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">start</span> = <span style="margin: 0px; padding: 0px; color: red;">0</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: green;">//执行分页SQL</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">SQL</span> = <span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;SELECT * FROM products WHERE deleted=0&quot;</span>.<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">where</span>.<span style="margin: 0px; padding: 0px; color: fuchsia;">&quot; ORDER BY $sidx $sord  <br style="margin: 0px; padding: 0px;"/>        LIMIT $start , $limit&quot;</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">result</span> = mysql_query(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">SQL</span>) <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">or</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">die</span>(<span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;Couldn t execute query.&quot;</span> . mysql_error()); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">responce</span>-&gt;page = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">page</span>;  <span style="margin: 0px; padding: 0px; color: green;">//当前页</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">responce</span>-&gt;total = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">total_pages</span>; <span style="margin: 0px; padding: 0px; color: green;">//总页数</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">responce</span>-&gt;records = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">count</span>; <span style="margin: 0px; padding: 0px; color: green;">//总记录数</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">i</span> = <span style="margin: 0px; padding: 0px; color: red;">0</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: green;">//循环读取数据</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">while</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span> = mysql_fetch_array(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">result</span>, MYSQL_ASSOC)) { <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">responce</span>-&gt;rows[<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">i</span>][<span style="margin: 0px; padding: 0px; color: purple;">'id'</span>] = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[id]; <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">opt</span> = <span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;&lt;a href='edit.php'&gt;修改&lt;/a&gt;&quot;</span>; <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">responce</span>-&gt;rows[<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">i</span>][<span style="margin: 0px; padding: 0px; color: purple;">'cell'</span>] = <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">array</span> ( <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'sn'</span>], <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'title'</span>], <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'size'</span>], <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'os'</span>], <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'charge'</span>], <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">row</span>[<span style="margin: 0px; padding: 0px; color: purple;">'price'</span>], <br style="margin: 0px; padding: 0px;"/>                <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">opt</span> <br style="margin: 0px; padding: 0px;"/>            ); <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">i</span>++; <br style="margin: 0px; padding: 0px;"/>        } <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">echo</span> json_encode(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">responce</span>);  <span style="margin: 0px; padding: 0px; color: green;">//输出JSON数据</span> <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">break</span>; <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">case</span> <span style="margin: 0px; padding: 0px; color: purple;">''</span> : <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">echo</span> <span style="margin: 0px; padding: 0px; color: purple;">'Bad request.'</span>; <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">break</span>; <br style="margin: 0px; padding: 0px;"/>} <br style="margin: 0px; padding: 0px;"/></code></pre><p style="margin: 6px auto; padding: 0px; text-indent: 2em; color: rgb(66, 66, 66); font-family: &quot;Microsoft YaHei&quot;, Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 253, 253);">值得一提的是，我们在进行中文查询时，即输入中文关键字进行查询时，需要用js进行escape编码，然后php接收中文关键字时相应的进行解码，否则会出现无法识别中文字符串的现象，本例中采用uniDecode函数进行解码，代码一并奉上：</p><pre style="margin: 6px auto; padding: 4px; border-width: 1px 1px 1px 5px; border-style: solid; border-color: rgb(215, 215, 215); border-image: initial; background: rgb(250, 250, 250); font-size: 12px; white-space: pre-wrap; word-wrap: break-word; color: rgb(66, 66, 66); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="margin: 0px; padding: 0px;">/处理接收jqGrid提交查询的中文字符串 <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">function</span> uniDecode(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">str</span>, <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">charcode</span>) { <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">text</span> = preg_replace_callback(<span style="margin: 0px; padding: 0px; color: fuchsia;">&quot;/%u[0-9A-Za-z]{4}/&quot;</span>, toUtf8, <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">str</span>); <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">return</span> mb_convert_encoding(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">text</span>, <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">charcode</span>, <span style="margin: 0px; padding: 0px; color: purple;">'utf-8'</span>); <br style="margin: 0px; padding: 0px;"/>} <br style="margin: 0px; padding: 0px;"/><span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">function</span> toUtf8(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">ar</span>) { <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">foreach</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">ar</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">as</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span>) { <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> = intval(substr(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span>, <span style="margin: 0px; padding: 0px; color: red;">2</span>), <span style="margin: 0px; padding: 0px; color: red;">16</span>); <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">if</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> &lt; 0x7F) { <span style="margin: 0px; padding: 0px; color: green;">// 0000-007F</span> <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span> .= chr(<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span>); <br style="margin: 0px; padding: 0px;"/>        } <br style="margin: 0px; padding: 0px;"/>        <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">elseif</span> (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> &lt; 0x800) { <span style="margin: 0px; padding: 0px; color: green;">// 0080-0800</span> <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span> .= chr(0xC0 | (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> / <span style="margin: 0px; padding: 0px; color: red;">64</span>)); <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span> .= chr(0x80 | (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> % <span style="margin: 0px; padding: 0px; color: red;">64</span>)); <br style="margin: 0px; padding: 0px;"/>        } <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">else</span> { <span style="margin: 0px; padding: 0px; color: green;">// 0800-FFFF</span> <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span> .= chr(0xE0 | ((<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> / <span style="margin: 0px; padding: 0px; color: red;">64</span>) / <span style="margin: 0px; padding: 0px; color: red;">64</span>)); <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span> .= chr(0x80 | ((<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> / <span style="margin: 0px; padding: 0px; color: red;">64</span>) % <span style="margin: 0px; padding: 0px; color: red;">64</span>)); <br style="margin: 0px; padding: 0px;"/>            <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span> .= chr(0x80 | (<span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">val</span> % <span style="margin: 0px; padding: 0px; color: red;">64</span>)); <br style="margin: 0px; padding: 0px;"/>        } <br style="margin: 0px; padding: 0px;"/>    } <br style="margin: 0px; padding: 0px;"/>    <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">return</span> <span style="margin: 0px; padding: 0px; color: navy; font-weight: bold;">$</span><span style="margin: 0px; padding: 0px; color: rgb(64, 64, 194);">c</span>; <br style="margin: 0px; padding: 0px;"/>} </code></pre></div><div><br/></div></span>
</div></body></html> 